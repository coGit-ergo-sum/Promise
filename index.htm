<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>Promise</title>

<!-- <link href="./stuffs/styles.css" rel="stylesheet" type="text/css" /> --> 
<!-- <link href="./stuffs/styles.R6A.css" rel="stylesheet" type="text/css" /> -->

	<link href="./stuffs/styles-modern.css" rel="stylesheet" type="text/css" />

	
	<style type="">

	
	.PGUIBase{		
		width: 25px;
		/*height:100px;*/
		border-radius: 20px;
		border-style:solid;
		border-width:1px;	
		background-color: transparent;	
	}

	.PGUIError{
		/*border-color: #fff;*/		
		/*background-color:#FFF;*/
		background-position: center; 
	}	

	.fulfilled{
		/*-webkit-box-shadow: 0px 0px 9px 3px rgba(255,255,0,0.73);
		-moz-box-shadow: 0px 0px 9px 3px rgba(255,255,0,0.73);
		box-shadow: 0px 0px 9px 3px rgba(255,255,0,0.73);*/
		-webkit-box-shadow: 0px 0px 9px 3px rgba(255, 255, 0, 0.863);
		-moz-box-shadow: 0px 0px 9px 3px rgba(255, 255, 0, 0.863);
		box-shadow: 0px 0px 9px 3px rgba(255, 255, 0, 0.863);
	}	
	
	
	.error{
		background-repeat: no-repeat;		
		background-image:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAOCAYAAAAmL5yKAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAFsSURBVDhPjZG/SgNBEMa/JIbciaJJioCF4qkgRBBbSaVvkN7CQuytbG1EX0Gw0BcQBMFoFdAiLyBGFBXlDCQYlSQeenH9dt2cl39wP27Ym93Zb2Zn0I+vaHSiAhRol9+mOaa3gyGAVA0ochXSKJLXR8GoA1uty9JeAfcMCFYFLyyWgIdqLCYqcwuikk6L60RCVnHPs5QO6w+z52XW50xGtChTRO69Afs6zCOsV0UDkSVmmtduFwawUjcMS7sKT0CW3kRzbxwYkX5I7bYTA6I/jnPif4on4ALbQ8CUdqVgTxgz2wDWtfsnILOz09NqJxgb/irAmavG+e3OsoSdOxf2aU6Uk8m2M2lV4FBdZjnLj8BHZ8BLNqtn8D8Fvzl8NacyE2b2HTZuWKn5iJum/usNGxph3w4iaxRIAl3RA6USag0HTxcFmMdHGHQZ3sEnMBq6AjbZ2VWW5U2O6oa0W+CGb32Pc7STAL92bGD3F7wzqJJcJFvqAAAAAElFTkSuQmCC');
	}
	


	
	div.progressBar{
		border-style: solid;
		border-width: 1px;
		border-color: #ccc;
		font-size: 1px;
		border-left-width: 1px;
		border-right-width: 1px;
		empty-cells:show;
		padding:2px;
		width:200px;
		display:inline-block;
		background-position: center left; 
		background-origin: content-box;
		margin-left:0px;
	}
	
	div.rejected{
		border-color:#FF0000;
	}
	
	div.resolved{
		border-color:#44CD5A;
	}
	
	div.fulfilled{
		border-color:#F8F413;
		/* padding-top:3px; */
		/* padding-bottom:3px; */
	}	
	
	div.bar{
		border : solid 0px #FFF;
		empty-cells:show;
		margin:0px;
		width:30%;
		color:#FFF;
	}
	
	div.bar span{
		padding-left:4px;
		margin-top:-10px;
		border : solid 1px transparent;
		font-size:12px;
	}
	
	span.message{
		display:inline-block;
		margin-left:0px;
	}
	
	spa n.prom ises{

		background-color:white;
		display:inline-block;
		height:100%;
		width:2px;
		color:red;
	}
	
	table.demo{
		/* border: solid 1px red; */
		border-spacing: 5px 10px;
		width:100%;
	}
	
	table.demo td.promise{
		height:24px;
		width:24px;
		/*color:red;*/
		/* margin:0px; */
		padding:1px;
		border-radius: 6px;
		border-style: solid;
		border-top:solid 1px #ccc;
		border-bottom:solid 1px #ccc;
		border-left-width:  15px;
		border-right-width: 15px;
		background-position: center center;
		background-origin: content-box;
		empty-cells:show;
	}
	
	table.demo td div.pendingL{
		border-left-color:  #cccccc;
	}
		
	table.demo td.pendingR{
		border-right-color:  #cccccc;
	}
	
	table.demo td div.resolved{
		border-left-color:  #1d9231;		
	}
	
	table.demo td div.rejected{
		border-left-color:  #F00;
	}	
	
	table.demo td div.catched{
		border--color:  #F00;		
	}
	
	table.demo td div.fulfilled{
		border-right-color: rgb(255,216,0); /* #F8F413;	*/
	}	
	
	table.PBStaus td{
		padding: 2px 8px 2px 8px;
		border-bottom:solid 1px transparent;
	}
	
	table.PBStaus td.pending{
		background-color:#cccccc;
		border-bottom-color:#cccccc;
	}	
	
	table.PBStaus td.resolved{
		background-color:#44CD5A;
		border-bottom-color:#44CD5A;
	}
	
	table.PBStaus td.rejected{
		background-color:#FF0000;
		border-bottom-color:#FF0000;
	}
	
	table.PBStaus td.timeout{
		background-color:#FF0000;
		border-bottom-color:#FF0000;
	}
	
	table.PBStaus{
		font-family:verdana;
		margin-bottom:20px;
		height:20px;
	}

	
	table.PBStaus td.space{
		width:12px;
	}	
	pre{
		font-size: 1em;
		tab-size: 3;
	}

	span.blue{
		/* color: #0c2ab1; */
		color: #569CD6;
		font-weight: bold;
	}	
	span.green{
		line-height: 0.5!important;
		color: #20c53b;
	}
	span.purple{
		color: #b34896;
		font-weight: bold;
	}	
	span.red{
		color: #ff5b5e;
		/* color:#F8F413; */	
		font-weight: bold;
	}
	span.yellow{
		color: #DCB862;	
		font-weight: bold;
	}
	.gray{
		color: #777;	
	}
	</style>  <meta charset="UTF-8">
	<style>
	  pre.ai {
		background-color: #1e1e1e;
		color: #d4d4d4;
		font-family: Consolas, 'Courier New', monospace;
		font-size: 1.1em;
		line-height: 1.3;
		padding-bottom: 1em;
		border-radius: 5px;
		margin: 0px;
	  }

	  pre.ai code span {
		background-color: transparent;
	  }
  
	  .keyword { color: #569CD6; }     /* function, let, const, if, etc. */
	  .function { color: #DCB862;  }    /*DCDCAA text-decoration: underline; function names */
	  .number { color: #B5CEA8; }      /* numbers */
	  .string { color: #CE9178; }      /* strings */
	  .comment { color: #20c53b; }     /* #6A9955; comments */
	  .method { color: #DCDCAA; }      /* methods like reset(), width(), etc. */
	  .variable { color: #9CDCFE; }    /* variable names */
	  .operator { color: #D4D4D4; }    /* =, +, >, etc. */
	  .punctuation { color: #D4D4D4; } /* () {} ; */

	  .black{color: #000;}             /* Not interesting code */

	  .red{ color: #ff5b5e; font-weight: bold;	}
	  .opaque{opacity: 0.5;}

	  .footnote-ref {
		font-size: 0.7em;
		vertical-align: super;
		line-height: 1;
		margin-left: 2px;
	  }

	  table.test td{
		border:solid 1px transparent;
		vertical-align: top;
		padding-top: 0px;
	}
	table.test td p.text{
		padding-left: 0px;
		padding-top: 0px!important;
		margin-top: 0px!important;
	}

	table.test td h2{
		border:solid 1px transparent;
		text-align: left;
		font-size: 1.2em;
		vertical-align: middle;
		padding: 0px;
		margin: 0px;
	}

	table.test td h2{
		border:solid 1px transparent;
		text-align: left;
		font-size: 1.2em;
		vertical-align: middle;
		padding: 0px;
		margin: 0px;
	}
	table.test td h2 span {
		font-size: 0.9em;
		opacity: 0.9;
		font-weight: normal;
	}

	table.test td.number{
		vertical-align: middle;
	}
	</style>



	<script src="./stuffs/jquery-1.11.3.js"></script>
	<script src="./js/PromiseDIY.js"></script>
	<script src="./js/ProgressBar.js"></script>
	<script src="./js/PromiseGUI.js"></script>
	
	<script language="javascript"> 
		
		window.onerror = function (msg, url, lineNo, columnNo, error) {
		  var string = msg.toLowerCase();
		  var substring = "script error";
		  if (string.indexOf(substring) > -1){
			alert('Script Error: See Browser Console for Detail');
		  } else {
		
			var message = [
			  'Message: ' + msg,
			  'URL: ' + url,
			  'Line: ' + lineNo,
			  'Column: ' + columnNo,
			  'Error object: ' + JSON.stringify(error)
			].join('\n');

			alert(message);
		  }

		  return false;
		};		
		
		$(document).ready(function() {
		});	

	</script>
<!-- 	
	<script type="application/ld+json"> 
		{
		  "@context": "https://schema.org",
		  "@type": "SoftwareSourceCode",
		  "programmingLanguage": "JavaScript",
		  "name": "Example of the implementation of a ASynchronous Functions",
		  "description": "An introductory section explaining the structure of ASynchronous functions in JavaScript",
		  "codeSampleType": "full",
		  "author": {
			"@type": "Person",
			"name": "Vincenzo Stramaglia"
		  },
		  "tutorial": {
			"@type": "HowTo",
			"name": "How to Create ASynchronous Functions in JavaScript",
			"description": "A beginner-level guide showing how to create ASynchronous functions in JavaScript.",
			"step": [
			  {
				"@type": "HowToStep",
				"name": "Define a Simple ASynchronous Function",
				"text": "Learn how to define an ASynchronous function in JavaScript, named : 'MainTask' and what makes it ASynchronous."
			  },

			]
		  }
		}
		</script> -->
	

</head>


<body>

	<section>
		<legend>
			<span class="underline">
				<span class="SectionLabel">Intro:</span>
			</span>
		</legend>
		<h1 style="font-weight:normal;margin-bottom:0px;">The <b>Promise</b></h1>
		<br>
		<p class="note">
			The 'Promise' is designed to handle ASynchronous processes.
		</p>	
	</section>
		
	<section style="border: solid 0px #ccc;background-color:transparent;box-shadow: none;text-align:center;">
		<p class="text">
			While the browser is in <span class="red">debug mode</span>, every 'click' on a button will display the running code
		</p>
	</section>

	<section>
		<legend>
			<span class="underline">
				<span class="SectionLabel">Intro 1:</span>&nbsp;
				<span class="SectionTitle"> Asynchronous process:&nbsp;</span>
				<span class="SectionSubTitle">what is it?</span>
			</span>
		</legend>
		
		<p class="text">
			But what is an ASynchronous process?
		</p>
		<ul>
			<li class="text">Calling someone and being stuck until they answer that's <b>Synchronous</b>.</li>
			<li class="text">Send a message, carry on, reply comes later that’s   <b>ASynchronous</b>.</li>
		</ul>	

		<br>
		<hr>
		
		<p class="text">
			These are the elements of an <b>ASynchronous</b> function in JavaScript:
		</p>	

		<table border="0" style="width:100%;" >

			<tr>
				<td class="" colspan="3">
<pre id="preMainFlow" class="ai"><code>
	<span class="comment">// In practice an ASync function is implemented in this way:</span>
	<span class="keyword">function</span> <span class="function">asynchronousFunction</span>() <span class="punctuation">{</span>
		<span class="comment">// "setInterval" is what makes this function ASynchronous</span>
		<span class="keyword">let</span> <span class="variable">intervalId</span> <span class="operator">=</span> <span class="function">setInterval</span><span class="punctuation">(</span><span class="red">deferredTask</span><span class="punctuation"></span>, <span class="variable">asyncDelay</span><span class="punctuation">);</span>
	<span class="punctuation">}</span>
	<hr style="padding: 0px;margin:0px;border-color:#777;"><div class="gray" style="background-color: #000;padding:5px 3px 3px 12px;">Now, here is how it fits into a typical flow:</div><hr style="padding: 0px;margin:0px;border-color:#777;">
	<span class="keyword">function</span> <span class="function">mainFlow</span><span class="punctuation">()</span> <span class="punctuation">{</span>
		<span class="comment">// ...</span>
		<span class="function">asynchronousFunction</span><span class="punctuation">()</span><span class="punctuation">;</span>
		<span class="comment">// ...</span>
	<span class="punctuation">}</span>
	    
	<span class="keyword" style="margin: 0px;padding:0px;">function</span> <span class="red">deferredTask</span><span class="punctuation"></span>(<span class="variable">x</span>, <span class="variable">y</span>, <span class="variable">...</span><span class="punctuation"></span>)</span> <span class="punctuation">{</span>
		<span class="comment">// Do something</span>
	<span class="punctuation">}</span>
</code></pre>

				</td>
			</tr>

			

			<tr>
				<td colspan="3"> 
					<ul>Summary of what happens:
						<li class="text">
								"<b>mainFlow</b>" calls "<b>asynchronousFunction</b>"
						</li>
						<li class="text">
								"setInterval" schedules the execution of "<b>deferredTask</b>" and immediately returns.
						</li>
						<li class="text">
								"<b>mainFlow</b>" continues and terminates.
						</li>
						<li class="text">
								The JavaScript engine waits for the specified <b>asyncDelay</b>.
						</li>
						
						<li class="text">
								then the "<b>deferredTask</b>" function is invoked (by the engine itself).
						</li>
					</ul>

				</td>		
			</tr>	

			<tr>
				<td colspan="3"> 
					<hr>
				</td>		
			</tr>		
			<tr>
				<td colspan="3"> 
					<p class="text">
						Here’s a practical example of how using <b>ASynchronous logic can make a real difference</b>.
					</p>					
				</td>		
			</tr>	
			
			<tr>
				<td class="msgContainer" colspan="3"> 
					<table border="0" style="width:300px;text-align:center;" align="center">
						<tr>
							<!-- <td id="tdR0AC1"><table class="demo"cellspacing="0"></table></td> -->
							<td id="tdS0A" colspan="3"><table class="demo"cellspacing="0"></table></td>
						</tr>
						<tr>
							<td style="text-align: center;"><button onclick="btnS0AStartS_onclick(this)"title="Implements a 'ProgressBar' by a Synchronous function.">Synchronous</button></td>
							<td style="text-align: center;"><button onclick="btnS0AStartA_onclick(this)"title="Implements a 'ProgressBar' by an ASynchronous function.">ASynchronous</button></td>
							<!-- <td style="text-align: center;"><button onclick="btnR0AStartH_onclick(this)"title="Starts an hybrid process represented by the 'ProgressBar'.">Hybrid</button></td>							 -->
						</tr>
						<!-- <tr>
							<td colspan="2" style="text-align: center;"><button onclick="btnR0AStart_onclick(this)"title="Starts the ASynchronous process represented by the 'ProgressBar'.">ASynchronous</button></td>
						</tr> -->
					</table>
			  </td>
			</tr>

			
			<tr>
				<td class="" colspan="3">
<pre id="preCommon" class="ai"><code>
	<span class="comment">// <span class="yellow">Click</span> the buttons show the difference between Sync & Async process.</span>
</code></pre>

<!-- 
SEO NOTE FOR CRAWLERS, AI TOOLS, AND INDEXERS:

This section demonstrates the visual and conceptual difference between Synchronous and ASynchronous JavaScript processes.

Two nearly identical functions are provided — their structure is purposefully kept almost identical, except for the lines that define their sync or async behavior.
This precise design ensures that:
– Shared parts remain visually stable.
– Key differences immediately stand out, helping users grasp the concept quickly.

The transition between the two examples is dynamically handled by JavaScript, ensuring:
– Smooth switching without visual flickering.
– Immediate perception of the critical logic differences.

⚡ Important: This dynamic visual effect is intended for **human learning and UX enhancement**.
Static parsers, crawlers, and AI analyzers might not capture the dynamic transitions but should understand the intent and educational value.

Keywords: JavaScript asynchronous example, sync vs async, progress bar demo, dynamic code comparison.
-->

<div id="divSync" style="display: none;">
<code><span class="comment">
	// Increases the width of the progressBar  Synchronously.</span>
	<span class="keyword">function</span> <span class="function">btnR0AStartS_onclick</span>(<span class="variable">btn</span>) <span class="punctuation">{</span>	
		<span class="opaque comment">// some small initialization</span>
		<span class="opaque">MoveHtml('#divASync');</span>
		<span class="opaque">R0A.progressBar.reset();</span>
		<span class="opaque">R0A.progressBar.green();</span>
		<span class="keyword">let</span> <span class="variable">wMax</span> <span class="operator">=</span> <span class="function">Math.floor</span>(<span class="number">100</span> <span class="operator">*</span> <span class="function">Math.random</span>())<span class="punctuation">;</span>
		<span class="keyword">let</span> <span class="variable">w</span> <span class="operator">=</span> <span class="number">0</span><span class="punctuation">;</span>

		<span class="comment">// This line STARTS the loop</span>
		<span class="keyword">while</span> (<span class="keyword">true</span>) <span class="punctuation">{</span>                  		
			<span class="variable">R0A</span>.<span class="method">progressBar.width</span>(<span class="variable">w</span>)<span class="punctuation">;</span>
			<span class="variable">w</span><span class="operator">++</span><span class="punctuation">;</span>
			<span class="comment">// This line ENDS the loop</span>
			<span class="keyword">if</span> (<span class="variable">w</span> <span class="operator">&gt;</span> <span class="variable">wMax</span>) <span class="punctuation">{</span> <span class="keyword">break</span><span class="punctuation">;</span><span class="punctuation">}</span>
		<span class="punctuation">}</span>
	<span class="punctuation">}</span></code>
</div>

<div id="divAsync" style="display: none;">
<code><span class="comment">
	// Increases the width of the progressBar ASynchronously.</span>
	<span class="keyword">function</span> <span class="function">btnR0AStartA_onclick</span>(<span class="variable">btn</span>) <span class="punctuation">{</span>	
		<span class="opaque comment">// some small initialization</span>
		<span class="opaque">MoveHtml('#divASync');</span>
		<span class="opaque">R0A.progressBar.reset();</span>
		<span class="opaque">R0A.progressBar.green();</span>
		<span class="keyword">let</span> <span class="variable">wMax</span> <span class="operator">=</span> <span class="function">Math.floor</span>(<span class="number">100</span> <span class="operator">*</span> <span class="function">Math.random</span>())<span class="punctuation">;</span>
		<span class="keyword">let</span> <span class="variable">w</span> <span class="operator">=</span> <span class="number">0</span><span class="punctuation">;</span>

		<span class="comment">// This line STARTS the loop</span>
		<span class="keyword">let</span> <span class="variable">intervalId</span> <span class="operator">=</span> <span class="function">setInterval</span>(() <span class="operator">=&gt;</span> <span class="punctuation">{</span>		
			<span class="variable">R0A</span>.<span class="method">progressBar.width</span>(<span class="variable">w</span>)<span class="punctuation">;</span>		
			<span class="variable">w</span><span class="operator">++</span><span class="punctuation">;</span>
			<span class="comment">// This line ENDS the loop</span>
			<span class="keyword">if</span> (<span class="variable">w</span> <span class="operator">&gt;</span> <span class="variable">wMax</span>) <span class="punctuation">{</span> <span class="function">clearInterval</span>(<span class="variable">intervalId</span>)<span class="punctuation">;</span> <span class="punctuation">}</span>
		<span class="punctuation">}</span>, <span class="number">8</span>)<span class="punctuation">;</span>	
	<span class="punctuation">}</span></code>
</div>
<div id="divHybrid" style="display: none;">	
	<span class="green">// This is an hybrid configuration:</span>
	<span class="green">// - each progressBar runs ASynchronously.</span>	
	<span class="green">// - collectively are executed synchronously.</span>	

	<span class="green">// This configuration requires a 'Promise' in</span>	
	<span class="green">// ASync/await configuration. </span>	
	<span class="green">// Refer to section 5 for details. </span>	
</div>
				</td>
			</tr>

			
			<tr>
				<td colspan="3"> 
					<p class="text">
						See the difference? <b>Same task, different outcomes</b>. Why is that?
					</p>
					<!-- <p class="text">
						Entrambe le funzioni cambiano la lunghezza di una barra ma solo la funzione asincrona sembra funzionare. Perchè?
					</p> -->
					<p class="text">
						When a function updates the page, the JavaScript engine waits until the function has finished before applying any changes (to the page).
					</p>
					<p class="text" style="margin-top: 0px;padding-top: 0px;">
						But we want the updates to appear continuously.						
					</p>
					
					<p class="text">
						The solution? Break the flow by calling an ASynchronous function repeatedly.
						Each time the ASynchronous function completes, the engine applies the changes.<br>
					</p>					
					<p class="text">
						That's what makes the progress bar appear to grow.
					</p>
					
					<p class="note">
						That’s exactly the kind of problem JavaScript’s Promise was made to solve.
					</p> 
				</td>		
			</tr>		

			
		</table>
	</section>	
	
	<section style="border: solid 0px #ccc;background-color:transparent;box-shadow: none;text-align:center;">	
		<p class="text"  >
			<!-- style="border: solid 1px #aaa;color:#222;" -->
			Functions are deliberately overused to clearly highlight the key logical sections.
		</p>
	</section>

	<section style="background-color: #fff; ">
		<legend>
			<span class="underline">
				<span class="SectionLabel">Intro 2:</span>&nbsp;
				<span class="SectionTitle"> Promise:&nbsp;</span>
				<span class="SectionSubTitle">Main elements</span>
			</span>
		</legend>


		<p class="text">
			A Promise is built around its <b>constructor</b> and the methods: '<b>then</b>', '<b>catch</b>', '<b>finally</b>'.
		</p>
		<p class="text">
			And each method requires its own callback (function).
		</p>

<pre class="ai"><code>
	<span class="comment">// The ECMAScript calls function provided to the constructor the '<b>executor</b>'</span>
	<span class="keyword">var</span> <span class="variable">promise</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="function">Promise</span>(<span class="red">executor</span>)<span class="punctuation">;</span>
	<!-- <span class="comment">// ATTENTION: Splitting the configuration into two parts is uncommon</span>
	<span class="comment">//            but intentional. It makes evident that the 'onResolve'</span>
	<span class="comment">//            and 'onReject' callbacks can be associated with the </span>
	<span class="comment">//            'Promise' at any time.</span>
	<span class="comment">//            Refer to sections 7B and onwards for more details.</span> -->
	<span class="variable">promise</span>
		<span class="punctuation">.</span><span class="function">then</span>(<span class="variable">onResolve</span><span class="punctuation">,</span> <span class="variable">onReject</span>)
		<span class="punctuation">.</span><span class="function">catch</span>(<span class="variable">onCatch</span>)
		<span class="punctuation">.</span><span class="function">finally</span>(<span class="variable">onFinally</span>)<span class="punctuation">;</span>
</code></pre>
<br>
<p class="text">
	<!-- The constructor requires a callback with other two callbacks as parameters: 'resolve' and 'reject' -->
	The constructor takes a callback, which in turn receives two functions as parameters: resolve and reject
</p>
<pre class="ai"><code>	
	<span class="keyword">function</span> <span class="red">executor</span>(<span class="variable">resolve</span>, <span class="variable">reject</span>) <span class="punctuation">{</span>
		<span class="keyword">try</span> <span class="punctuation">{</span>
			<span class="comment">// Do your stuff, then:</span>
			<span class="keyword">if</span> <span class="punctuation">(</span><span class="variable">elaborationSucceeded</span><span class="punctuation">)</span> <span class="punctuation">{</span>
				<span class="variable">resolve</span><span class="punctuation">(</span><span class="variable">anyParameterYouWant</span><span class="punctuation">)</span><span class="punctuation">;</span>
			<span class="punctuation">}</span> <span class="keyword">else</span> <span class="punctuation">{</span>
				<span class="variable">reject</span><span class="punctuation">(</span><span class="keyword">new</span> <span class="class">Error</span><span class="punctuation">(</span><span class="string">'any message'</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
			<span class="punctuation">}</span>
		<span class="punctuation">}</span> <span class="keyword">catch</span> <span class="punctuation">(</span><span class="variable">jse</span><span class="punctuation">)</span> <span class="punctuation">{</span>
			<span class="variable">reject</span><span class="punctuation">(</span><span class="variable">jse</span><span class="punctuation">)</span><span class="punctuation">;</span>
		<span class="punctuation">}</span>
	<span class="punctuation">}</span>
</code></pre>
<br>
<p class="text">
	And the following are the callbacks for the other methods of the 'Promise'.
</p>
<pre class="ai"><code>		
	<span class="comment">// 'info' is '<b>anyParameterYouWant</b>'</span>
	<span class="keyword">function</span> <span class="function">onResolve</span>(<span class="variable">info</span>)<span class="punctuation">{</span>
		<span class="comment">// do anything appropriate when executor resolved.</span>
	<span class="punctuation">}</span>
	
	<span class="comment">// 'jse' is an instance of a JavaScript '<b>Error</b>'</span>
	<span class="keyword">function</span> <span class="function">onReject</span>(<span class="variable">jse</span>)<span class="punctuation">{</span>
		<span class="comment">// do anything appropriate when executor rejected.</span>
	<span class="punctuation">}</span>
	
	<span class="comment">// 'jse' is an instance of a JavaScript '<b>Error</b>'</span>
	<span class="keyword">function</span> <span class="function">onCatch</span>(<span class="variable">jse</span>)<span class="punctuation">{</span>
		<span class="comment">// Handle errors appropriately.</span> 
	<span class="punctuation">}</span>
	
	<span class="keyword">function</span> <span class="function">onFinally</span>()<span class="punctuation">{</span>
		<span class="comment">// Execute final actions regardless of resolve, reject or error.</span> 
	<span class="punctuation">}</span>
</code></pre>

<p class="text">
	This is close to the more formal setup — we’ll look at some simpler ones next.
</p>
	</section>

	<!-- Intro 3  Tests-->
	<section>
		<legend>
			<span class="underline">
				<span class="SectionLabel">Intro 3):</span>&nbsp;
				<span class="SectionTitle">Tests</span>			
				<span class="SectionSubTitle"> The flow of the callbacks</span>
			</span>
		</legend>
		


		<table class="test" style="border: solid 1px transparent;width:100%;margin-top:15px;">

			<tbody>		
				<tr>
					<td></td>
					<td colspan="2">
						<p class="text">
							These are the callbacks that will be used throughout this section.
						</p>
					</td>
				</tr>

				<tr>
					<td></td>
					<td>
						<!-- <button style="width: 80px;">run</button> -->
					</td>			
					<td style="vertical-align: top;">
<pre class="ai" style="margin-top:0px;"><code>
	<span class="comment">// In this example 'info' is a string but can be anything.</span> 
	<span class="keyword">function</span> <span class="function">onResolve</span><span class="punctuation">(</span><span class="variable">info</span><span class="punctuation">)</span> <span class="punctuation">{</span>
		<span class="function">alert</span><span class="punctuation">(`</span><span class="string">promise.then onResolve </span><span class="punctuation">${</span><span class="variable">info</span><span class="punctuation">}</span><span class="punctuation">`</span><span class="punctuation">);</span>
	<span class="punctuation">}</span>	
		
	<span class="comment">// 'jse' should be a javascript Error object.</span> 
	<span class="keyword">function</span> <span class="function">onReject</span><span class="punctuation">(</span><span class="variable">jse</span><span class="punctuation">)</span> <span class="punctuation">{</span>
		<span class="function">alert</span><span class="punctuation">(`</span><span class="string">promise.then onReject </span><span class="punctuation">${</span><span class="variable">jse</span><span class="punctuation">.</span><span class="variable">message</span><span class="punctuation">}</span><span class="punctuation">`</span><span class="punctuation">);</span>
	<span class="punctuation">}</span>

	<span class="comment">// 'jse' should be a javascript Error object.</span> 
	<span class="keyword">function</span> <span class="function">onCatch</span><span class="punctuation">(</span><span class="variable">jse</span><span class="punctuation">)</span> <span class="punctuation">{</span>		
		<span class="function">alert</span><span class="punctuation">(`</span><span class="string">promise.catch onCatch </span><span class="punctuation">${</span><span class="variable">jse</span><span class="punctuation">.</span><span class="variable">message</span><span class="punctuation">}</span><span class="punctuation">`</span><span class="punctuation">);</span>
	<span class="punctuation">}</span>

	<span class="comment">// 'onFinally' does not expect any parameter.</span> 
	<span class="keyword">function</span> <span class="function">onFinally</span><span class="punctuation">()</span> <span class="punctuation">{</span>
		<span class="function">alert</span><span class="punctuation">(`</span><span class="string">promise.finally onFinally</span><span class="punctuation">`</span><span class="punctuation">);</span>
	<span class="punctuation">}</span>
</code></pre>	
					</td>	
				</tr>	
					
				<tr><td colspan="3"><hr></td></tr>
			</tbody>

			<!-- row 1 -->
			<tbody>
				<tr>
					<td class="number">1)</td>
					<td colspan="2">
						<h2>
							Resolve in the 'executor': <span>Caugth by then -> onResolve </span>
						</h2>
					</td>
				</tr>

				<tr>
					<td style="vertical-align: top;"></td>
					<td style="vertical-align: top;width: 100px;">
						<button onclick="btnI41_onclick(this)" style="width: 80px;">run</button>
					</td>			
					<td style="vertical-align: top;">
<pre class="ai" style="margin-top:0px;"><code>			
	<span class="keyword">function</span> <span class="function">executor</span>(<span class="variable">resolve</span>, <span class="variable">reject</span>) <span class="punctuation">{</span>

		<span class="comment">// Browser in debug-mode code waits here.</span>
		<span class="keyword">debugger</span>;

		<span class="comment">// This will call '<span class="red">onResolve</span>'.</span>
		<span class="variable">resolve</span><span class="punctuation">(</span><span class="string">"executor resolved"</span><span class="punctuation">)</span><span class="punctuation">;</span>
	<span class="punctuation">}</span>

	<span class="keyword">new</span> <span class="function">Promise</span><span class="punctuation">(</span><span class="variable">executor</span><span class="punctuation">)</span>
		<span class="punctuation">.</span><span class="function">then</span><span class="punctuation">(</span><span class="red">onResolve</span><span class="punctuation">,</span> <span class="variable">onReject</span><span class="punctuation">)</span>
		<span class="punctuation">.</span><span class="function">catch</span><span class="punctuation">(</span><span class="variable">onCatch</span><span class="punctuation">)</span>
		<span class="punctuation">.</span><span class="function">finally</span><span class="punctuation">(</span><span class="variable">onFinally</span><span class="punctuation">);</span>
</code></pre>
					</td>
				</tr>	

				<tr><td colspan="3"><hr></td></tr>
			</tbody>
			
			<!-- row 2 -->
			 <tbody>
				<tr>	
					<td class="number">2)</td>		
					<td colspan="2">
						<h2>
							Reject in the 'executor': <span>Caugth by then -> onReject </span>
						</h2>
					</td>
				</tr>
				
				<tr>
					<td style="vertical-align: top;"></td>
					<td style="vertical-align: top;width: 100px;">
						<button onclick="btnI42_onclick(this)" style="width: 80px;">run</button>
					</td>			
					<td style="vertical-align: top;">
<pre class="ai" style="margin-top:0px;"><code>
	<span class="keyword">function</span> <span class="function">executor</span>(<span class="variable">resolve</span>, <span class="variable">reject</span>) <span class="punctuation">{</span>
		
		<span class="comment">// Browser in debug-mode code waits here.</span>
		<span class="keyword">debugger</span>;

		<span class="comment">// This will call '<span class="red">onReject</span>' in the correct way.</span>
		<span class="variable">reject</span>(<span class="keyword">new</span> <span class="class">Error</span>(<span class="string">"executor rejected"</span>))<span class="punctuation">;</span>
	<span class="punctuation">}</span>

	<span class="keyword">new</span> <span class="function">Promise</span><span class="punctuation">(</span><span class="variable">executor</span><span class="punctuation">)</span>
		<span class="punctuation">.</span><span class="function">then</span><span class="punctuation">(</span><span class="variable">onResolve</span><span class="punctuation">,</span> <span class="red">onReject</span><span class="punctuation">)</span>
		<span class="punctuation">.</span><span class="function">catch</span><span class="punctuation">(</span><span class="variable">onCatch</span><span class="punctuation">)</span>
		<span class="punctuation">.</span><span class="function">finally</span><span class="punctuation">(</span><span class="variable">onFinally</span><span class="punctuation">);</span>
</code></pre>
					</td>
				</tr>	

				<tr><td colspan="3"><hr></td></tr>	
			</tbody>

			<!-- row 3 -->
			 <tbody>
				<tr>
					<td class="number">3)</td>
					<td colspan="2">
						<h2>Exception in the 'executor' <span>Caugth by then -> onReject </span></h2>
					</td>
				</tr>	
				
				<tr>
					<td style="vertical-align: top;"></td>
					<td style="vertical-align: top;width: 100px;">
						<button onclick="btnI43_onclick(this)" style="width: 80px;">run</button>
					</td>			
					<td style="vertical-align: top;">
		<pre class="ai" style="margin-top:0px;"><code>
			<span class="keyword">function</span> <span class="function">executor</span>(<span class="variable">resolve</span>, <span class="variable">reject</span>) <span class="punctuation">{</span>
				
				<span class="comment">// Browser in debug-mode code waits here.</span>
				<span class="keyword">debugger</span>;

				<span class="comment">// 'Promise' will call '<span class="red">onReject</span>' passing an error as a parameter</span>
				<span class="keyword">throw</span> <span class="keyword">new</span> <span class="function">Error</span><span class="punctuation">(</span><span class="string">'executor error thown'</span><span class="punctuation">)</span><span class="punctuation">;</span>
			<span class="punctuation">}</span>	

			<span class="keyword">new</span> <span class="function">Promise</span><span class="punctuation">(</span><span class="variable">executor</span><span class="punctuation">)</span>
				<span class="punctuation">.</span><span class="function">then</span><span class="punctuation">(</span><span class="variable">onResolve</span><span class="punctuation">,</span> <span class="red">onReject</span><span class="punctuation">)</span>
				<span class="punctuation">.</span><span class="function">catch</span><span class="punctuation">(</span><span class="variable">onCatch</span><span class="punctuation">)</span>
				<span class="punctuation">.</span><span class="function">finally</span><span class="punctuation">(</span><span class="variable">onFinally</span><span class="punctuation">);</span>
		</code></pre>
					</td>
				</tr>				

				<tr><td colspan="3"><hr></td></tr>
			</tbody>	

			<!-- row 4 -->
			<tbody>
				<tr>
					<td class="number">4)</td>
					<td colspan="2">
						<h2>Exception in the 'executor' <span>Caugth by onCatch </span></h2>
					</td>
				</tr>
				<tr>
					<td></td>
					<td colspan="2">
						<p class="text">
							In case of an exception, 'Promise' calls either 'onReject' or 'onCatch' (depending on configuration), 
							passing an Error object. 
						</p>
						<p class="text" style="padding-top: 0px;margin-top:0px;">
							This behaviour is fixed, so when calling 'reject' (inside the 'executor'), it’s crucial to pass an 
							instance of 'Error' to avoid unexpected results.
						</p>
					</td>
				</tr>

				<!-- In the event of an exception within the executor, 'Promise' will call either 'onReject' or 'onCatch', passing an error as a parameter -->
				<tr>			
					<td style="vertical-align: top;"></td>
					<td style="vertical-align: top;width: 100px;">
						<button onclick="btnI44_onclick(this)" style="width: 80px;">run</button>
					</td>			
					<td style="vertical-align: top;">
		<pre class="ai" style="margin-top:0px;"><code>
			<span class="keyword">function</span> <span class="function">executor</span>(<span class="variable">resolve</span>, <span class="variable">reject</span>) <span class="punctuation">{</span>
				
				<span class="comment">// Browser in debug-mode code waits here.</span>
				<span class="keyword">debugger</span>;

				<span class="comment">// 'Promise' will call '<span class="red">onCatch</span>' passing an error as a parameter</span>
				<span class="keyword">throw</span> <span class="keyword">new</span> <span class="function">Error</span><span class="punctuation">(</span><span class="string">'executor error thown'</span><span class="punctuation">)</span><span class="punctuation">;</span>
			<span class="punctuation">}</span>	

			<span class="keyword">new</span> <span class="function">Promise</span><span class="punctuation">(</span><span class="variable">executor</span><span class="punctuation">)</span>
				<span class="comment">// In the absence of 'onReject', 'onCatch' will be called.</span>
				<span class="punctuation">.</span><span class="function">then</span><span class="punctuation">(</span><span class="variable">onResolve</span><span class="punctuation">)</span> 
				<span class="punctuation">.</span><span class="function">catch</span><span class="punctuation">(</span><span class="red">onCatch</span><span class="punctuation">)</span>
				<span class="punctuation">.</span><span class="function">finally</span><span class="punctuation">(</span><span class="variable">onFinally</span><span class="punctuation">);</span>
		</code></pre>
					</td>
				</tr>	

				<tr><td colspan="3"><hr></td></tr>			
			</tbody>

			<!-- row 5 -->
			<tbody>
				<tr>
					<td class="number">5)</td>
					<td colspan="2">
						<h2>Exception in 'onResolve' <span>Caugth by onCatch </span></h2>
					</td>
				</tr>
				<tr>
					<td></td>
					<td colspan="2">
						<p class="text">
							In case of an exception, 'Promise' calls either 'onReject' or 'onCatch' (depending on configuration), 
							passing an Error object. 
						</p>
						<p class="text" style="padding-top: 0px;margin-top:0px;">
							This behaviour is fixed, so when calling 'reject' (inside the 'executor'), it’s crucial to pass an 
							instance of 'Error' to avoid unexpected results.
						</p>
					</td>
				</tr>

				<!-- In the event of an exception within the executor, 'Promise' will call either 'onReject' or 'onCatch', passing an error as a parameter -->
				<tr>			
					<td style="vertical-align: top;"></td>
					<td style="vertical-align: top;width: 100px;">
						<button onclick="btnI44_onclick(this)" style="width: 80px;">run</button>
					</td>			
					<td style="vertical-align: top;">
		<pre class="ai" style="margin-top:0px;"><code>
			<span class="keyword">function</span> <span class="function">executor</span>(<span class="variable">resolve</span>, <span class="variable">reject</span>) <span class="punctuation">{</span>
				
				<span class="comment">// Browser in debug-mode code waits here.</span>
				<span class="keyword">debugger</span>;

				<span class="comment">// 'Promise' will call '<span class="red">onCatch</span>' passing an error as a parameter</span>
				<span class="keyword">throw</span> <span class="keyword">new</span> <span class="function">Error</span><span class="punctuation">(</span><span class="string">'executor error thown'</span><span class="punctuation">)</span><span class="punctuation">;</span>
			<span class="punctuation">}</span>	

			<span class="keyword">new</span> <span class="function">Promise</span><span class="punctuation">(</span><span class="variable">executor</span><span class="punctuation">)</span>
				<span class="comment">// In the absence of 'onReject', 'onCatch' will be called.</span>
				<span class="punctuation">.</span><span class="function">then</span><span class="punctuation">(</span><span class="variable">onResolve</span><span class="punctuation">)</span> 
				<span class="punctuation">.</span><span class="function">catch</span><span class="punctuation">(</span><span class="red">onCatch</span><span class="punctuation">)</span>
				<span class="punctuation">.</span><span class="function">finally</span><span class="punctuation">(</span><span class="variable">onFinally</span><span class="punctuation">);</span>
		</code></pre>
					</td>
				</tr>	

				<tr><td colspan="3"><hr></td></tr>			
			</tbody>


			<!-- row 6 -->
			 <tbody>
				<tr>
					<td class="number">6)</td>
					<td colspan="2">
						<h2>Exception in 'onReject' <span>Caugth by onCatch </span></h2>
					</td>
				</tr>

				
				<tr>
					<td></td>
					<td colspan="2">
						<p class="text">
							<b>The message is</b>: Every unhandled exception escalates until it reaches the 'onCatch' handler.
						</p>
					</td>
				</tr>
			
				<tr>
					<td style="vertical-align: top;"></td>
					<td style="vertical-align: top;width: 100px;">
						<button onclick="btnI45_onclick(this)" style="width: 80px;">run</button>
					</td>			
					<td style="vertical-align: top;">
		<pre class="ai" style="margin-top:0px;"><code>
			<span class="keyword">function</span> <span class="function">executor</span>(<span class="variable">resolve</span>, <span class="variable">reject</span>) <span class="punctuation">{</span>
				
				<span class="comment">// Browser in debug-mode code waits here.</span>
				<span class="keyword">debugger</span>;

				<span class="comment">// 'Promise' will call '<span class="red">onReject</span>' passing an error as a parameter</span>
				<span class="keyword">throw</span> <span class="keyword">new</span> <span class="function">Error</span><span class="punctuation">(</span><span class="string">'executor error thown'</span><span class="punctuation">)</span><span class="punctuation">;</span>
			<span class="punctuation">}</span>	

			<span class="comment">// A locally defined 'onReject'</span>
			<span class="keyword">function</span> <span class="function">_onReject</span>(<span class="variable">jse</span>) <span class="punctuation">{</span>
				<span class="comment">// This is the common 'onReject'</span>
				<span class="function">onReject</span>(<span class="variable">jse</span>) <span class="punctuation">;</span>

				<span class="comment">// The 'Promise' will call 'onCatch'</span>
				<span class="keyword">throw</span> <span class="keyword">new</span> <span class="function">Error</span>(<span class="string">"Error thrown into the 'onReject' callback"</span>)<span class="punctuation">;</span>
			<span class="punctuation">}</span>
			
			<span class="keyword">new</span> <span class="function">Promise</span><span class="punctuation">(</span><span class="variable">executor</span><span class="punctuation">)</span>
				<span class="punctuation">.</span><span class="function">then</span><span class="punctuation">(</span><span class="variable">onResolve</span><span class="punctuation">,</span> <span class="red">onReject</span><span class="punctuation">)</span>
				<span class="punctuation">.</span><span class="function">catch</span><span class="punctuation">(</span><span class="variable">onCatch</span><span class="punctuation">)</span>
				<span class="punctuation">.</span><span class="function">finally</span><span class="punctuation">(</span><span class="variable">onFinally</span><span class="punctuation">);</span>
		</code></pre>
					</td>
				</tr>			
				
				<tr><td colspan="3"><hr></td></tr>	
			</tbody>
			
			<!-- test 7 --> 
			 <tbody>			 			
				<tr>
					<td class="number">7)</td>
					<td colspan="2">
						<h2>Exception in 'onCatch' <span>Silent.</span></h2>
					</td>
				</tr>

				
				<tr>
					<td></td>
					<td colspan="2">
						<p class="text">
							The session is a bit long, so here’s <b>the message</b>: Every exception escalates except the one 
							inside the 'onCatch' which remains 'silent'.
						</p>
						
						<p class="text">
							<b>This means</b> that the only point where a 'try/catch' block could be beneficial is inside the 'onCatch' handler.
						</p>
					</td>
				</tr>

				<tr>
					<td style="vertical-align: top;"></td>
					<td style="vertical-align: top;width: 100px;">
						<button onclick="btnI46_onclick(this)" style="width: 80px;">run</button>
					</td>			
					<td style="vertical-align: top;">
		<pre class="ai" style="margin-top:0px;"><code>
			<span class="comment">// Promise catches all exceptions except those in onCatch and onFinally</span>
			<span class="keyword">function</span> <span class="function">executor</span>(<span class="variable">resolve</span>, <span class="variable">reject</span>) <span class="punctuation">{</span>
				
				<span class="comment">// Browser in debug-mode code waits here.</span>
				<span class="keyword">debugger</span>;

				<span class="comment">// 'Promise' will call '<span class="red">_onReject</span>' passing an error as a parameter</span>
				<span class="keyword">throw</span> <span class="keyword">new</span> <span class="function">Error</span><span class="punctuation">(</span><span class="string">'1 - executor error thown'</span><span class="punctuation">)</span><span class="punctuation">;</span>
			<span class="punctuation">}</span>	

			<span class="comment">// A locally defined 'onReject'</span>
			<span class="keyword">function</span> <span class="red">_onReject</span>(<span class="variable">jse</span>) <span class="punctuation">{</span>
				<span class="comment">// This is the common 'onReject'</span>
				<span class="function">onReject</span>(<span class="variable">jse</span>) <span class="punctuation">;</span>

				<span class="comment">// The 'Promise' will call 'onCatch'</span>
				<span class="keyword">throw</span> <span class="keyword">new</span> <span class="function">Error</span>(<span class="string">"2 - Error thrown into the 'onReject' callback"</span>)<span class="punctuation">;</span>
			<span class="punctuation">}</span>

			<span class="comment">// A locally defined 'onCatch'</span>
			<span class="keyword">function</span> <span class="function">_onCatch</span>(<span class="variable">jse</span>) <span class="punctuation">{</span>
				<span class="comment">// This is the common 'onCatch'</span>
				<span class="function">onCatch</span>(<span class="variable">jse</span>) <span class="punctuation">;</span>

				<span class="comment">// ------------------------------------------------------------ //.</span>
				<span class="comment">// this exception will be sillent.</span>
				<span class="keyword">throw</span> <span class="keyword">new</span> <span class="function">Error</span>(<span class="string">"3 - Error thrown into the 'onCatch' callback"</span>)<span class="punctuation">;</span>
				<span class="comment">// ------------------------------------------------------------ //.</span>
				<span class="punctuation">}</span>

			<span class="comment">// A locally defined 'onFinally'</span>
			<span class="keyword">function</span> <span class="function">_onFinally</span>() <span class="punctuation">{</span>
				<span class="comment">// This is the common 'onFinally'</span>
				<span class="function">onFinally</span>() <span class="punctuation">;</span>

				<span class="comment">// ------------------------------------------------------------ //.</span>
				<span class="comment">// this exception will be sillent.</span>
				<span class="keyword">throw</span> <span class="keyword">new</span> <span class="function">Error</span>(<span class="string">"3 - Error thrown into the 'onFinally' callback"</span>)<span class="punctuation">;</span>
				<span class="comment">// ------------------------------------------------------------ //.</span>
				<span class="punctuation">}</span>
			
			<span class="keyword">new</span> <span class="function">Promise</span><span class="punctuation">(</span><span class="variable">executor</span><span class="punctuation">)</span>
				<span class="punctuation">.</span><span class="function">then</span><span class="punctuation">(</span><span class="variable">onResolve</span><span class="punctuation">,</span> <span class="red">_onReject</span><span class="punctuation">)</span>
				<span class="punctuation">.</span><span class="function">catch</span><span class="punctuation">(</span><span class="variable">_onCatch</span><span class="punctuation">)</span>
				<span class="punctuation">.</span><span class="function">finally</span><span class="punctuation">(</span><span class="variable">_onFinally</span><span class="punctuation">);</span>
		</code></pre>
					</td>
				</tr>
				
			 </tbody>
			
			 <tbody>
				
				<!-- <tr><td colspan="3">&nbsp;</td></tr>	 -->
				<tr><td colspan="3"><hr></td></tr>	
				<tr>
					<td></td>
					<td colspan="2">
						<p class="text">
							<b>About the exceptions, the messages are</b>:
						</p>
						<p class="note">
							Unhandled exceptions in the 'executor' are escalated to 'onReject' or, if absent, to 'onCatch'.
						</p>
						<p class="note">
							Unhandled exceptions in 'onResolve' or 
							'onReject' are escalated by 'Promise' to 'onCatch'.
						</p>
						<p class="note">
							When the exception is handled by the 'Promise', the parameter passed to the callback is of type 'Error'.							
						</p>
						<p class="note">
							Unhandled exceptions in 'onCatch' are silent.
						</p>
					</td>
				</tr>
				<!-- <tr><td colspan="3">&nbsp;</td></tr>	 -->
				
			</tbody>
		</table>

	</section>

	<!-- Intro 5 -->
	<!-- <section>
		<legend>
			<span class="underline">
				<span class="SectionLabel">Intro 5:</span>&nbsp;
				<span class="SectionTitle"> Asynchronous without promise:&nbsp;</span>
				<span class="SectionSubTitle">(the vintage way)</span>
			</span>
		</legend>

		<p class="text">
			When working with a single asynchronous operation, using a Promise is one option.
		</p>
		<p class="text">
			If you're comfortable with callback programming, you can structure the '<b>executor</b>' 
			functions like this, and the functionality will be the same.
		</p>
<pre class="ai"><code>
		<span class="comment">// Promise-Free ASynchronous Function Implementation.</span>
		<span class="keyword">function</span> <span class="red">executor</span><span class="punctuation">()</span> <span class="punctuation">{</span>
			<span class="keyword">try</span> <span class="punctuation">{</span>	
				<span class="keyword">setTimeout</span>(<span class="punctuation">()</span> <span class="punctuation">=&gt;</span> <span class="punctuation">{</span>			
					<span class="comment">// ------------------------------------- //</span>
					<span class="comment">// do something ASynchronous (or not)</span>
			
					<span class="keyword">if</span> (<span class="variable">elaborationSucceeded</span>) <span class="punctuation">{</span>
						<span class="variable">onResolve</span>(<span class="variable">anyParameterYouWant</span>);
					<span class="keyword">}</span>
					<span class="keyword">else</span> <span class="punctuation">{</span>
						<span class="variable">onReject</span>(<span class="keyword">new</span> <span class="function">Error</span>(<span class="string">'any message'</span>));
					<span class="punctuation">}</span>			
					<span class="comment">// ------------------------------------- //</span>
				<span class="punctuation">},</span> <span class="variable">asyncDelay</span><span class="punctuation">);</span>
			<span class="punctuation">}</span>
			<span class="keyword">catch</span>(<span class="variable">jse</span>) <span class="punctuation">{</span>
				<span class="variable">onCatch</span>(<span class="variable">jse</span>);
			<span class="punctuation">}</span>
			<span class="keyword">finally</span> <span class="punctuation">{</span>
				<span class="variable">onFinally</span>(<span class="punctuation">)</span>;
			<span class="punctuation">}</span>
		<span class="punctuation">}</span>
</code></pre>

<p class="text">
	This indicates that for a 
	single ASynchronous function, using a Promise adds 
	unnecessary complexity. 
</p>

		<p class="text">
			The situation radically changes when dealing with multiple ASynchronous operations.
		</p>
	</section> -->

	<!--Note  -->
	<section style="border: solid 0px #ccc;background-color:transparent;box-shadow: none;">

		<p class="text">
			To better understand how Promises help harmonise or synchronise multiple 
			asynchronous operations, two tools and a demo code are provided:
		</p>
		<ul>
			<li class="text">
					<b>ProgressBar</b> — a graphical model that represents the progression of an asynchronous process. 
					The progress bar visually reflects the state of the operation, updating its width and colour 
					based on the outcome of the asynchronous task, giving immediate feedback on whether 
					the process is progressing, has completed successfully, or has encountered an error.
			</li>
			<li class="text">
					<b>PromiseGUI</b> — a graphical model that shows how the Promise responds 
					to what happens inside the ProgressBar.<br>
					It doesn’t display the state of the Promise itself, but the flow between the four callbacks it 
					manages: <i>onResolve</i>, <i>onReject</i>, <i>onCatch</i>, and <i>onFinally</i>.

			</li>
			<li class="text">
					<b>PromiseDIY</b> — a very simplified version of the Promise implementation.  
					It is written purely for learning purposes, to give a basic idea of how the Promise interacts with its four callbacks.
			</li>
		</ul>
		
		<br>

		<p class="text">In the real world:</p>

		<ul>
			<li class="text">
					<b>ProgressBar</b> might represent an asynchronous call to an AJAX API that either <i>resolves</i> or <i>rejects</i>.
			</li>
			<li class="text">
				<b>PromiseGUI</b> might be code that adapts the page layout based on the AJAX API’s response.
			</li>
		</ul>
		

		

	</section>		

	
	<!--Aside 1  -->
	<aside style="background-color: #F0F0F5;">
		<legend>
			<span class="underline">
				<span class="SectionLabel">Widget 1A:</span>&nbsp;
				<span class="SectionTitle">ProgressBar</span>
				<span class="SectionSubTitle">how it works.</span>
			</span>
		</legend>
		<br>
		<style>
			table.XXXWX td{
				border: solid 1px red;
			}
		</style>				
		<p class="text">
			The '<b>ProgressBar</b>'
		</p>

		<table class="XXXX" style="width:100%;">
			<tr>	
				<td id="tdR1AC2" style="text-align:center;">
					<!-- ProgressBar placeholder -->
				</td>
			</tr>
		</table>

		<p class="text">
			The progressBar is a tool to make visible the progression of an ASynchronous process.
		</p>
		<table class="XXXX" style="width:100%;">
			<tr>	
				<td id="tdR1AC1" class="btnsContainer" style="vertical-align:middle;height:30px;">
					<div style="text-align: center; margin-top:20px; margin-bottom:15px;">
						<button onclick="btnR1AStart_onclick(this)" title="Starts the asynchronous process represented by the 'ProgressBar'.">GO</button>
						<span style="padding-left: 6px; display:inline-block; width: 200px;">&nbsp;</span>
					</div>
				</td>
			</tr>
		</table>

		<p class="text">
			It exposes a function named '<span class="red">executor</span>'', which is designed to be used by a Promise and 
			accepts two callbacks: '<b>resolve</b>'' and '<b>reject</b>', which are used to send messages back to the Promise, to notify the outcome of the ASynchronous operation. 
		</p>			
<pre class="ai"><code>
	<span class="keyword">const</span> <span class="variable">pb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="function">ProgressBar</span><span class="punctuation">(</span><span class="string">'pbID'</span><span class="punctuation">)</span><span class="punctuation">;</span>
	<span class="keyword">var</span> <span class="variable">promise</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="function">Promise</span>(<span class="variable">pb</span>.<span class="red">executor</span>)<span class="punctuation">;</span>
</code></pre>				
		<p class="note">
			<!-- The 'Progress bar' implements an ASynchronous process that runs for a random amount of time and ends up with one state chosen randomly between 4 internal states. -->
			The 'Progress bar' implements an ASynchronous process that runs for a <b>random time</b> and ends up with a <b>random state</b> chosen between 4 internal states.
		</p>
		<p class="text">
			These 4 states are graphically <b>visible only to the user </b> (by the bar). 
		</p>	

		<table class="PBStaus" style="width: 100%;" cellpadding="0" cellspacing="0">
			<tr>
				<td class="space"></td>
				<td class="resolved" style="width: 80px;"></td>
				<td class="space"></td>
				<td class="rejected" style="width: 80px;"></td>
				<td class="space"></td>
				<td class="timeout" style="color:white; width: 80px;">Timeout</td>
				<td class="space" style="width: 10px;"></td>
				<td class="error" style="width:100px; background-position: 30px 12px;"></td>
			</tr>

			<tr>
				<td class="space"></td>
				<td style="vertical-align: top;">1) Resolved</td>
				<td class="space"></td>
				<td style="vertical-align: top;">2) Rejected</td>
				<td class="space"></td>
				<td style="vertical-align: top;">3) Timeout</td>
				<td class="space"></td>
				<td style="vertical-align: top;">4) Internal Error</td>
			</tr>

			<tr>
				<td colspan="8">
				<p class="text" style="font-size:0.75em;font-style: italic;">
						'3) <b>Timeout</b>' and '4) <b>Internal Error</b>' are internal conditions managed by the ProgressBar.
						From the Promise’s perspective, both are treated as a generic rejection.
					</p>
				</td>
			</tr>

			<tr><td colspan="8">&nbsp;</td></tr>
			<tr>
				<td colspan="8">
					<p class="text">
						These are the internal <b>outcomes communicate to the 'Promise'</b>;
					</p>
				</td>
			</tr>

			<tr>
				<td class="space">&nbsp;	</td>
				<td class="resolved" style="width: 80px;"></td>
				<td class="space"></td>
				<td class="rejected" colspan="5"></td>
			</tr>

			<tr>
				<td class="space"></td>
				<td>Resolved</td>
				<td class="space"></td>
				<td colspan="5" style="text-align:center;">Rejected</td>
			</tr>
		</table>

		
		<!-- <span style="font-size:0.9em;font-style: italic;">
			<p class="text">
				Think of it like this: a company (the "Promise") hires you (the "executor" function) for a mission 
				and hands you a smartphone (the <b>resolve</b> callback). Your job is to buy supplies. 
				Once the mission is complete, you call back the company to report success (the message) 
				and the cost of the supplies (the data).
			</p>
		</span> -->

	</aside>
	
	
	<aside style="border: solid 0px #ccc;background-color:transparent;box-shadow: none;">
		<p class="text">
			Once received a message ('resolve' xOr 'reject'), the 'Promise' is ready to call the methods listed at the introduction. 
			'<b>PromiseGUI</b>' is the tool used by this page to give a graphical representation of the action taken by the 'Promise'.
		</p>
	</aside>		
	
	<!--Section 1B  -->
	<aside style="background-color: #F0F0F5;">
		<legend>
			<span class="underline">
				<span class="SectionLabel">Widget 1B:</span>&nbsp;
				<span class="SectionTitle">PromiseGUI</span>
				<span class="SectionSubTitle">how it works.</span>
			</span>
		</legend>

		<table border="0" style="width:100%;">
		
			<tr>
				<td colspan="3"> 
					&nbsp;
				</td>		
			</tr>
			<tr>
				<td class="msgContainer" colspan="3"> 
					The <b>'PromiseGUI'</b> 
					<br/>			
				</td>
			</tr>

			<tr>

				<td id="tdR1BC2" style="text-align:center;"  colspan="3"> 
					
					<table class="demo" align="center"  style="width:60px;">
						<tr>
							<!-- PromiseGUI place holder -->
							<td></td>
						</tr>
					</table>
					
				</td>	
		
			</tr>
			<!-- <tr>
				<td colspan="3"> 
					<hr>
				</td>		
			</tr> -->
			
			<tr>
				<td class="msgContainer" colspan="3"> 
					<p class="text">
						The '<b>PromiseGUI</b>' is a graphical interface that models the method called by the promise after the '<b>executor</b>' has completed its task, whether successfully or not.
					</p>			
				</td>
			</tr>
				

			<tr>
				<td class="msgContainer" colspan="3"><br>
					<p class="text">
						The 'PromiseGUI' exposes 4 functions, each one has (here) a different graphical representation:
					</p>
				</td>
			</tr>
	
			<tr>
				<td class="btnsContainer" style='border: solid 0px transparent'>
					<!-- <table>
						<tr>
							<td><button id='btnR1BResolved' onclick="btnR1BResolved_onclick(this)" style="width:75px;">resolved</button></td>
							<td>Indicates that 'resove'  was called inside the <b>executor></b></td>
						</tr>
						<tr> 
							<td><button id='btnR1BRejected' onclick="btnR1BRejected_onclick(this)" style="width:75px;">rejected</button></td>
							<td>Indicates that 'reject'  was called inside the <b>executor></b></td>
						</tr>
						<tr>
							<td><button id='btnR1BCatched' onclick="btnR1BCatched_onclick(this)" style="width:165px;">catched</button></td>
							<td>Indicates that an uncaught error occurred inside the <b>executor></b></td>
						</tr>
						<tr>
							<td><button id='btnR1BFulfilled' onclick="btnR1BFulfilled_onclick(this)" style="width:165px;">fulfilled (finally)</button></td>
							<td>Indicates that 'finally' was called by the 'Promise'.</td>
						</tr>

					</table>					 -->

					<button id='btnR1BResolved' onclick="btnR1BResolved_onclick(this)" style="width:75px;" title="Indicates that 'resove'  was called inside the 'executor'">resolved</button> 
					<button id='btnR1BRejected' onclick="btnR1BRejected_onclick(this)" style="width:75px;" title="Indicates that 'reject'  was called inside the 'executor'">rejected</button> 
					<button id='btnR1BCatched' onclick="btnR1BCatched_onclick(this)" style="width:165px;" title="Indicates that an uncaught error occurred inside the 'executor'">catched</button>
					<button id='btnR1BFulfilled' onclick="btnR1BFulfilled_onclick(this)" style="width:165px;" title="Indicates that 'finally' was called by the 'Promise'.">fulfilled (finally)</button>	
				</td>
				<td class="pbsContainer" id="">
					<button onclick="btnR1BReset_onclick(this)" title="Resets the buttons for a new simulation.">reset</button>
				</td>
				<td class="msgContainer"> 
					
					<br/>
					
				</td>							
				
			</tr>
			
			<tr>
				<td class="msgContainer" colspan="3"> 
					
				</td>
			</tr>
		
		</table>
	</aside>

	
	<!-- PromiseDIY 3  -->
	<!-- <section style="border: solid 0px #ccc;background-color:transparent;box-shadow: none;"> -->
	<aside style="background-color: #F0F0F5;">
		<legend>
			<span class="underline">
				<span class="SectionLabel">Snippet 1A:</span>&nbsp;
				<span class="SectionTitle"> Promise DIY</span>				
				<span class="SectionSubTitle">A minimal DIY-style Promise.</span>
			</span>
		</legend>
		
		<p class="text">
			Have you ever wondered how a 'Promise' works internally?
		</p>
		
		<p class="text">
			This code offers a glimpse — it doesn’t cover everything, but it captures the general structure.
		</p>

		
		<table style="width: 100%;">

			<tr>
				<td class="btnsContainer" style="white-space: nowrap;"> 
					<button onclick="btnR2AThen_onclick(this)"    title="Uses the 'Promise' object">GO <span style="font-size: 0.8em;opacity:0.5">('Promise')</span></button>
					<button onclick="btnR2ADIYThen_onclick(this)" title="Uses the 'PromiseDIY' object">GO <span style="font-size: 0.8em;opacity:0.5">('PromiseDIY')</span></button>
				</td>
				<td class="pbsContainer" id="tdR2AC2"> 
					<table class="demo"cellspacing="0"></table>
				</td>
				<td class="msgContainer">					
					<p class="text" style="font-size: 0.8em;font-style: italic;">
						(Just an example to show PromiseDIY works.)
					</p>
				</td>							
				
			</tr>
		</table>


	<pre class="ai"><code>
		<span class="comment">// A basic DIY Promise that actually works.</span>
		<span class="keyword">class</span> <span class="function">PromiseDIY</span> <span class="punctuation">{</span>
		
			<span class="variable">onResolve</span> <span class="operator">=</span> <span class="keyword">null</span><span class="punctuation">;</span>
			<span class="variable">onReject</span>  <span class="operator">=</span> <span class="keyword">null</span><span class="punctuation">;</span>
			<span class="variable">onCatch</span>   <span class="operator">=</span> <span class="keyword">null</span><span class="punctuation">;</span>
			<span class="variable">onFinally</span> <span class="operator">=</span> <span class="keyword">null</span><span class="punctuation">;</span>
		
			<span class="keyword">constructor</span>(<span class="red">_executor</span>) <span class="punctuation">{</span>
			
				<span class="keyword">const</span> <span class="purple">_resolve</span> <span class="operator">=</span> (<span class="variable">_value</span>) <span class="operator">=&gt;</span> <span class="punctuation">{</span>
					<span class="keyword">this</span>.<span class="variable">onResolve</span>(<span class="variable">_value</span>)<span class="punctuation">;</span>
					<span class="keyword">this</span>.<span class="variable">onFinally</span>()<span class="punctuation">;</span>
				<span class="punctuation">}</span><span class="punctuation">;</span>
			
				<span class="keyword">const</span> <span class="purple">_reject</span> <span class="operator">=</span> (<span class="variable">_value</span>) <span class="operator">=&gt;</span> <span class="punctuation">{</span>
					<span class="keyword">this</span>.<span class="variable">onReject</span>(<span class="variable">_value</span>)<span class="punctuation">;</span>
					<span class="keyword">this</span>.<span class="variable">onFinally</span>()<span class="punctuation">;</span>
				<span class="punctuation">}</span><span class="punctuation">;</span>
			
				<span class="comment">// ---------------------------------------------- //</span>
				<span class="keyword">try</span> <span class="punctuation">{</span>
					<span class="red">_executor</span>(<span class="purple">_resolve</span>, <span class="purple">_reject</span>)<span class="punctuation">;</span>
				<span class="punctuation">}</span> 
				<span class="keyword">catch</span> (<span class="variable">_error</span>) <span class="punctuation">{</span>
					<span class="keyword">this</span>.<span class="variable">onCatch</span>(<span class="variable">_error</span>)<span class="punctuation">;</span>
					<span class="keyword">this</span>.<span class="variable">onFinally</span>()<span class="punctuation">;</span>
				<span class="punctuation">}</span>
				<span class="comment">// ---------------------------------------------- //</span>
			<span class="punctuation">}</span>
			
			<span class="function">then</span>(<span class="variable">_onResolve</span>, <span class="variable">_onReject</span>) <span class="punctuation">{</span>
				<span class="keyword">this</span>.<span class="variable">onResolve</span> <span class="operator">=</span> <span class="variable">_onResolve</span><span class="punctuation">;</span>
				<span class="keyword">this</span>.<span class="variable">onReject</span> <span class="operator">=</span> <span class="variable">_onReject</span><span class="punctuation">;</span>
		
				<span class="comment">// implements the chaining</span>
				<span class="keyword">return</span> <span class="keyword">this</span><span class="punctuation">;</span> 
			<span class="punctuation">}</span>
			
			<span class="function">catch</span>(<span class="variable">_onCatch</span>) <span class="punctuation">{</span>
				<span class="keyword">this</span>.<span class="variable">onCatch</span> <span class="operator">=</span> <span class="variable">_onCatch</span><span class="punctuation">;</span>
		
				<span class="comment">// implements the chaining</span>
				<span class="keyword">return</span> <span class="keyword">this</span><span class="punctuation">;</span>
			<span class="punctuation">}</span>
			
			<span class="function">finally</span>(<span class="variable">_onFinally</span>) <span class="punctuation">{</span>
				<span class="keyword">this</span>.<span class="variable">onFinally</span> <span class="operator">=</span> <span class="variable">_onFinally</span><span class="punctuation">;</span>
		
				<span class="comment">// implements the chaining</span>
				<span class="keyword">return</span> <span class="keyword">this</span><span class="punctuation">;</span>
			<span class="punctuation">}</span>
		<span class="punctuation">}</span>
		</code></pre>


	</aside>

	
	
	<!--Section 1A  -->	
	<section>
		<legend>
			<span class="underline">
				<span class="SectionLabel">Section 1A:</span>&nbsp;
				<span class="SectionTitle">'Promise'</span>
				<span class="SectionSubTitle">Why this name?</span>
			</span>
		</legend>

		<br>
		<table border="0"  style="width: 100%;border:solid 0px transparent;">
			<tbody>

				<tr>
					<td colspan="2">
						<p class="text">
							The answer lies in these two snippets of code.
						</p>
					</td>
				</tr>

				<tr>
					<td></td>
					<td>
						<p class="text">
							Here, we create an instance of Promise, passing it an '<b>executor</b>' function.
							The executor is immediately executed by the Promise constructor.
						</p>
						<p class="text">
							As soon as the executor completes its task, it informs the Promise (either by calling 'resolve' or 'reject').
							However, without any attached callbacks, the Promise can do nothing but wait.
						</p>

					</td>
				</tr>	

				<tr>
					<td style="vertical-align: top;width: 100px;">
						<button onclick="S0C.btnS0C71_onclick(this)" style="width: 80px;">Step 1</button>
					</td>			
					<td style="vertical-align: top;">
		<pre class="ai" style="margin-top:0px;"><code>
			<span class="comment">// This shows why the 'Promise' is called so.</span>	
			<span class="keyword">var</span> <span class="variable">promise</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="function">Promise</span>(<span class="red">executor</span>)<span class="punctuation">;</span>
		</code></pre>
					</td>
				</tr>
				
				<tr><td colspan="2">&nbsp;</td></tr>
				<tr style="margin-top: 250px;">
					<td></td>
					<td>
						<p class="text">
							In the second snippet, we attach the callbacks the Promise needs to finish its job.
						</p>
					</td>
				</tr>			

				<tr>
					<td style="vertical-align: top;width: 100px;">
						<button onclick="S0C.btnS0C72_onclick(this)" style="width: 80px;">Step 2</button>
					</td>			
					<td style="vertical-align: top;">
		<pre class="ai" style="margin-top:0px;"><code>
			<span class="variable">promise</span>
			<span class="punctuation">.</span><span class="function">then</span>(<span class="variable">onResolve</span><span class="punctuation">,</span> <span class="variable">onReject</span>)
			<span class="punctuation">.</span><span class="function">catch</span>(<span class="variable">onCatch</span>)
			<span class="punctuation">.</span><span class="function">finally</span>(<span class="variable">onFinally</span>)<span class="punctuation">;</span>
		</code></pre>
					</td>
				</tr>
				
			 </tbody>

		</table>


			<br>

			<!-- ------------------------------------------------------------------------------------- -->
			<hr>

			<br>
			<p class="text">
				This is a another example, this time graphical
			</p>

			<table border="0"  style="width: 100%;border:solid 0px transparent;">
				<tbody>		
					
					<tr>
						<td class="pbsContainer" id="tdS1AE2" colspan="2"> 
							<table class="demo"cellspacing="0"></table>
						</td>
					</tr>

				</tbody>
				<tbody>
					<tr>
						<td colspan="2">
							<p class="text">
								Clicking '<b>Step 1</b>' creates a new instance of 'Promise' and the ASyncronous process is executed (entirely)
							</p>
							<p class="text">
								Promise knows the result of the ASynchronous process but is waiting you to do the answer
							</p>
						</tr>

					<tr>
						<td style="vertical-align: top;width: 100px;">
							<button onclick="btnS1AStep1_onclick(this)"      style="width: 80px;" title="Promise implemented in two times.">Step 1</button>
						</td>			
						<td style="vertical-align: top;padding: 0px;">
<pre class="ai"><code>
	<span class="comment">// Browser in debug-mode code waits here.</span>
	<span class="keyword">debugger</span><span class="punctuation">;</span>

	<span class="variable">R1C</span>.<span class="variable">promise</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="keyword">Promise</span>(<span class="variable">R1C</span>.<span class="variable">pb</span>.<span class="variable">executor</span>)<span class="punctuation">;</span>
</code></pre>		
						</td>
					</tr>

				</tbody>
				<tbody>
					<tr>
						<td colspan="2">
							<p class="text">
								Clicking '<b>Step 2</b>' 'Promise' gets the callbacks it needs to tell us what was the result.
							</p>
						</tr>
					
					
						<tr>
						<td style="vertical-align: top;width: 100px;">
							<button onclick="btnS1AStep2_onclick(this)" style="width: 80px;">Step 2</button>
						</td>			
						<td style="vertical-align: top;">
<pre class="ai"><code>
	<span class="comment">// Browser in debug-mode code waits here.</span>
	<span class="keyword">debugger</span><span class="punctuation">;</span>

	<span class="variable">R1C</span>.<span class="variable">promise</span>
		<span class="punctuation">.</span><span class="function">then</span>(<span class="variable">R1C</span>.<span class="variable">pgui</span>.<span class="variable">resolved</span><span class="punctuation">,</span> <span class="variable">R1C</span>.<span class="variable">pgui</span>.<span class="variable">rejected</span>)
		<span class="punctuation">.</span><span class="function">catch</span>(<span class="variable">R1C</span>.<span class="variable">pgui</span>.<span class="variable">catched</span>)
		<span class="punctuation">.</span><span class="function">finally</span>(<span class="variable">R1C</span>.<span class="variable">pgui</span>.<span class="variable">fulfilled</span>)<span class="punctuation">;</span>
</code></pre>		
						</td>
					</tr>



				</tbody>
			</table>
			
			<hr>
			<br>
			<p class="text">
				Thus:
			</p>
			<p class="note">
				the Promise takes responsibility for executing the given task (the executor) and <b>promises</b> to deliver the result 
				it receives, but only when you ask for it, by registering the callbacks: onResolve, onReject onCatch, onFinally.
			</p>

	</section>
	

		
	
	<!--Section 1B  -->	
	<section>
		<legend>
			<span class="underline">
				<span class="SectionLabel">Section 1B:</span>&nbsp;
				<span class="SectionTitle">No 'Promise'</span>
				<span class="SectionSubTitle">(vintage implementation)</span>
			</span>
		</legend>

		<br>

		<p class="text">
			Before the introduction of 'Promise', ASynchronous functions were managed using callbacks.
		</p>

		<table border="0"  style="width: 100%;border:solid 0px transparent;">
			
		<tr>
			<td class="btnsContainer" style="width: 100px;"> 
				<button style="width: 80px;" onclick="btnS1B_onclick(this)"  title="Asynchronous function managed without 'Promise'">GO</button>
			</td>
			<td class="pbsContainer" id="tdS1B"> 
				<table class="demo"cellspacing="0"></table>
			</td>
			<td class="msgContainer"> 
				<!-- This is a basic, yet complete, configuration of the 'Promise' using all its features. -->
			</td>							
			
		</tr>
		</table>

<pre class="ai"><code>
	<span class="comment">// Handling of an ASynchronous function by callbacks (no 'Promise')</span>
	<span class="keyword">function</span> <span class="function">btnS1B_onclick</span>(<span class="variable">btn</span>) <span class="punctuation">{</span>
		<span class="keyword">try</span><span class="punctuation">{</span>
			<span class="function">console.clear</span><span class="punctuation">();</span>
			<span class="variable">pgui</span>.<span class="method">reset</span><span class="punctuation">();</span>		

			<span class="comment">// Keep the browser in 'debug-mode' to show the live code.</span>
			<span class="keyword">debugger</span><span class="punctuation">;</span>

			<span class="comment">// 'pgui.resolved' & 'pgui.rejected' are the callbacks functions</span>
			<span class="comment">// provided to the 'then' function of the 'Promise'.</span>
			<span class="variable">pb</span>.<span class="red">executor</span>(<span class="variable">pgui</span>.<span class="method">resolved</span>, <span class="variable">pgui</span>.<span class="method">rejected</span>)<span class="punctuation">;</span>
		<span class="punctuation">}</span>

		<span class="comment">// 'pgui.catched' is the callback function</span>
		<span class="comment">// provided to the 'catch' function of the 'Promise'.</span>
		<span class="keyword">catch</span>(<span class="variable">e</span>)<span class="punctuation">{</span>
			<span class="variable">pgui</span>.<span class="method">catched</span><span class="punctuation">;</span>
		<span class="punctuation">}</span>
		
		<span class="comment">// 'pgui.fulfilled' is the callback function</span>
		<span class="comment">// provided to the 'finally' function of the 'Promise'.</span>
		<span class="keyword">finally</span><span class="punctuation">{</span>
			<span class="variable">pgui</span>.<span class="method">fulfilled</span><span class="punctuation">;</span>
		<span class="punctuation">}</span>	
	<span class="punctuation">}</span>

</code></pre>		
		<table border="0" >
	
			<tr>
				<td class="msgContainer" colspan="3"> 

				</td>
			</tr>
		
			<tr>
				<td class="msgContainer" colspan="3"> 
					<p class="text">
						When handling a simple 
						asynchronous function, using 'Promise' is an option—a choice between formalism and simplicity.
					</p>
					<p class="note">
						Handling many ASynchronous function, using 'Promise' become <b>a must</b> to avoid the '<b>callback hell</b>'.
					</p>
					<p class="text">
						<span style="font-size:0.9em;font-style: italic;">(try some shot and then hit F12 and take a look at the code.)</span>
					</p>
				</td>
				</td>
			</tr>

			

		</table>
	</section>
	
	
	
	<!--Section 2A  -->	
	<!-- <section>
		<legend>
			<span class="underline">
				<span class="SectionLabel">Section 2A:</span>&nbsp;
				<span class="SectionTitle">'Promise'</span>
				<span class="SectionSubTitle">for dummies.</span>
			</span>
		</legend>		

<pre class="ai"><code>
	<span class="comment">// Handles an asynchronous function by the 'PromiseDIY'.</span>
	<span class="keyword">function</span> <span class="function">btnR2ADIYThen_onclick</span>(<span class="variable">btn</span>) <span class="punctuation">{</span>

		<span class="gray">console.clear();</span>
		<span class="gray">pgui.reset();</span>

		<span class="comment">// Keep the browser in 'debug-mode' to show the live code.</span>
		<span class="keyword">debugger</span><span class="punctuation">;</span>

		<span class="comment">// Instantiate the 'PromiseDIY'.</span>
		<span class="keyword">let</span> <span class="variable">promise</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="red">PromiseDIY</span>(<span class="variable">pb</span>.<span class="function">executor</span>)
			.<span class="function">then</span>(
				<span class="variable">pgui</span>.<span class="function">resolved</span><span class="punctuation">,</span> 
				<span class="variable">pgui</span>.<span class="function">rejected</span>
			)
			.<span class="function">finally</span>(<span class="variable">pgui</span>.<span class="function">fulfilled</span>)
			.<span class="function">catch</span>(<span class="variable">pgui</span>.<span class="function">catched</span>)<span class="punctuation">;</span>
	<span class="punctuation">}</span>

</code></pre>		
		<table border="0" >
		
			<tr>
				<td class="msgContainer" colspan="3"> 
					<p class="text">
						Now we are ready to use the 'Promise' object in the easiest way: a very basic, yet complete, configuration of the 'Promise' using the features just described.
						<span style="font-size:0.9em;font-style: italic;">(try some shot and then hit F12 and take a look at the code, please.)</span>
					</p>
				</td>
			</tr>
		
			<tr>
				<td class="btnsContainer" > 
					<button onclick="btnR2AThen_onclick(this)"    title="Uses the 'Promise' object">GO</button>
					<button onclick="btnR2ADIYThen_onclick(this)" title="Uses the 'PromiseDIY' object">GO DIY</button>
				</td>
				<td class="pbsContainer" id="tdR2AC2"> 
					<table class="demo"cellspacing="0"></table>
				</td>
					
				
			</tr>
			
			<tr>
				<td class="msgContainer" colspan="3"> 
					<p class="text">
						What missed here, is the exception management, and the 'ProgressBar' is configured to not throw any exception.
					</p>					
				</td>
			</tr>
		</table>
	</section> -->

		
	<!--Note  -->
	<section style="border: solid 0px #ccc;background-color:transparent;box-shadow: none;">
			<p class="MIB text">
				 Now it's time to put things together...<span style="font-size:0.9em;font-style: italic;">(When the going gets tough, the tough get going.)</span>
			</p>
	</section>		

	
	<!--Section 3A  -->
	<section>
		<legend>
			<span class="underline">
				<span class="SectionLabel">Section 3A:</span>&nbsp;
				<span class="SectionTitle">'Promise'</span>
				<span class="SectionSubTitle">(nerd version)</span>
			</span>
		</legend>

		<p class="text">
			This configuration might seem a bit over-engineered, but it does offer a few solutions that could be useful.
	   </p>

<pre class="ai"><code>

	<span class="comment">// This is a fully configurated 'Promise'</span>
	<span class="comment">// - Protected against exception</span>
	<span class="comment">// - Provides complex data to callbacks</span>
	<span class="keyword">function</span> <span class="function">btnR3AThen_onclick</span>(<span class="variable">btn</span>) <span class="punctuation">{</span>

		<span class="opaque">tools.reset(pguis);</span>
		<span class="opaque">tools.disableBtns(btn);</span>
		<span class="opaque">console.clear();</span>	

		<span class="comment">// Keep the browser in 'debug-mode' to show the live code.</span>
		<span class="keyword">debugger</span><span class="punctuation">;</span>

		<span class="keyword">for</span> <span class="punctuation">(</span><span class="keyword">let</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span><span class="punctuation">;</span> <span class="variable">i</span> <span class="operator">&lt;</span> <span class="variable">n</span><span class="punctuation">;</span> <span class="variable">i</span><span class="operator">++</span><span class="punctuation">)</span> <span class="punctuation">{</span>		

			<span class="comment">// Closure needs must be managed in that way, when used within a loop</span>
			<span class="keyword">let</span> <span class="variable">pb</span> <span class="operator">=</span> <span class="variable">pbs</span><span class="punctuation">[</span><span class="variable">i</span><span class="punctuation">]</span><span class="punctuation">;</span>
			<span class="keyword">let</span> <span class="variable">pgui</span> <span class="operator">=</span> <span class="variable">pguis</span><span class="punctuation">[</span><span class="variable">i</span><span class="punctuation">]</span><span class="punctuation">;</span>		

			<span class="keyword">let</span> <span class="variable">promise</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="keyword">Promise</span><span class="punctuation">(</span><span class="keyword">function</span><span class="punctuation">(</span><span class="variable">resolve</span><span class="punctuation">,</span> <span class="variable">reject</span><span class="punctuation">)</span> <span class="punctuation">{</span>
				<span class="keyword">try</span><span class="punctuation">{</span>

					<span class="comment">// ------------------------------------------------------------------------ //</span>
					<span class="comment">// both the callbacks: 'resolve' and 'reject', can have ONLY ONE PARAMETER.</span>
					<span class="comment">// On the other hand our functions 'resolve' & 'reject' need 2 parameters</span>
					<span class="comment">// (each one)</span>
					<span class="comment">// The following variable 'envelope', wraps those 2 parameters.</span>
					<span class="keyword">let</span> <span class="variable">_resolve</span> <span class="operator">=</span> <span class="keyword">function</span><span class="punctuation">(</span><span class="variable">result</span><span class="punctuation">)</span> <span class="punctuation">{</span>
						<span class="keyword">let</span> <span class="variable">envelope</span> <span class="operator">=</span> <span class="punctuation">{</span><span class="variable">result</span><span class="punctuation">:</span> <span class="variable">result</span><span class="punctuation">,</span> <span class="variable">pgui</span><span class="punctuation">:</span> <span class="variable">pgui</span><span class="punctuation">}</span><span class="punctuation">;</span>	
						<span class="variable">resolve</span><span class="punctuation">(</span><span class="variable">envelope</span><span class="punctuation">)</span><span class="punctuation">;</span>
					<span class="punctuation">}</span>
					<span class="comment">// ------------------------------------------------------ //</span>

					<span class="comment">// ------------------------------------------------------ //</span>
					<span class="keyword">let</span> <span class="variable">_reject</span> <span class="operator">=</span> <span class="keyword">function</span><span class="punctuation">(</span><span class="variable">result</span><span class="punctuation">)</span> <span class="punctuation">{</span>
						<span class="keyword">let</span> <span class="variable">envelope</span> <span class="operator">=</span> <span class="punctuation">{</span><span class="variable">result</span><span class="punctuation">:</span> <span class="variable">result</span><span class="punctuation">,</span> <span class="variable">pgui</span><span class="punctuation">:</span> <span class="variable">pgui</span><span class="punctuation">}</span><span class="punctuation">;</span>		
						<span class="variable">reject</span><span class="punctuation">(</span><span class="variable">envelope</span><span class="punctuation">)</span><span class="punctuation">;</span>
					<span class="punctuation">}</span>
					<span class="comment">// ------------------------------------------------------ //</span>

					<span class="variable">pb</span><span class="punctuation">.</span><span class="function">executor</span><span class="punctuation">(</span><span class="variable">_resolve</span><span class="punctuation">,</span> <span class="variable">_reject</span><span class="punctuation">)</span><span class="punctuation">;</span>
				<span class="punctuation">}</span>

				<span class="keyword">catch</span><span class="punctuation">(</span><span class="variable">jse</span><span class="punctuation">)</span> <span class="punctuation">{</span>
					<span class="variable">window</span><span class="punctuation">.</span><span class="variable">console</span><span class="punctuation">.</span><span class="variable">promise</span><span class="punctuation">.</span><span class="function">log</span><span class="punctuation">.</span><span class="function">catch</span><span class="punctuation">(</span><span class="variable">jse</span><span class="punctuation">)</span><span class="punctuation">;</span>

					<span class="keyword">let</span> <span class="variable">rejectionResult</span> <span class="operator">=</span> <span class="variable">pb</span><span class="punctuation">.</span><span class="function">getRejectionResult</span><span class="punctuation">(</span><span class="variable">jse</span><span class="punctuation">)</span><span class="punctuation">;</span>
					<span class="keyword">let</span> <span class="variable">envelope</span> <span class="operator">=</span> <span class="punctuation">{</span><span class="variable">result</span><span class="punctuation">:</span> <span class="variable">rejectionResult</span><span class="punctuation">,</span> <span class="variable">pgui</span><span class="punctuation">:</span> <span class="variable">pgui</span><span class="punctuation">}</span><span class="punctuation">;</span>	

					<span class="comment">// this ensures '_reject' will always receive the correct type</span>
					<span class="comment">// parameter and all the info it needs.</span>
					<span class="variable">reject</span><span class="punctuation">(</span><span class="variable">envelope</span><span class="punctuation">)</span><span class="punctuation">;</span>
				<span class="punctuation">}</span>

			<span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>

			<span class="comment">// ------------------------------------------------------ //</span>
			<span class="variable">promise</span>
				<span class="punctuation">.</span><span class="function">then</span><span class="punctuation">(</span><span class="variable">R3A</span><span class="punctuation">.</span><span class="variable">resolve</span><span class="punctuation">,</span> <span class="variable">R3A</span><span class="punctuation">.</span><span class="variable">reject</span><span class="punctuation">)</span>
				<span class="punctuation">.</span><span class="function">finally</span><span class="punctuation">(</span><span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=&gt;</span> <span class="punctuation">{</span> <span class="variable">R3A</span><span class="punctuation">.</span><span class="function">finally</span><span class="punctuation">(</span><span class="variable">pb</span><span class="punctuation">,</span> <span class="variable">pgui</span><span class="punctuation">,</span> <span class="variable">btn</span><span class="punctuation">)</span><span class="punctuation">;</span> <span class="punctuation">}</span><span class="punctuation">)</span>
				<span class="punctuation">.</span><span class="function">catch</span><span class="punctuation">(</span><span class="punctuation">(</span><span class="variable">error</span><span class="punctuation">)</span> <span class="operator">=&gt;</span> <span class="punctuation">{</span> <span class="variable">R3A</span><span class="punctuation">.</span><span class="function">catch</span><span class="punctuation">(</span><span class="variable">error</span><span class="punctuation">,</span> <span class="variable">pb</span><span class="punctuation">,</span> <span class="variable">pgui</span><span class="punctuation">)</span><span class="punctuation">;</span> <span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
			<span class="comment">// ------------------------------------------------------ //</span>	

		<span class="punctuation">}</span>	
	<span class="punctuation">}</span>
</code></pre>		
		
		<table border="0" >
		
			<tr>
				<td class="msgContainer" colspan="3"> 
					<p class="text">
						Again, a 'Promise' in the easiest way. This time fully configured against exception: <b>practically unstoppable</b>.
					</p>
				</td>
			</tr>
		
			<tr>
				<td class="btnsContainer" > 
					<button onclick="btnR3AThen_onclick(this)">then</button>
				</td>
				<td class="pbsContainer" id="tdR3AC2"> 					
					<div id="tdR3AC2" class="scroll" style="">
						<table class="demo"cellspacing="0"></table>
					</div>				
				</td>
				<td class="msgContainer"> 

				</td>							
				
			</tr>
		</table>
	</section>

	<!--Section 3B  -->
	<section>
		<legend>
			<span class="underline">
				<span class="SectionLabel">Section 3B:</span>&nbsp;
				<span class="SectionTitle">'Promise'</span>
				<span class="SectionSubTitle"><span class="blue">async</span>/<span class="blue">await</span> version.</span></span>
			</span>
		</legend>

		<table border="0" >
		
			<tr>
				<td class="msgContainer" colspan="3"> 
					<p class="text">
						Again, a 'Promise' in the easiest way. This time fully configured against exception: <b>practically unstoppable</b>.
					</p>
				</td>
			</tr>
		
			<tr>
				<td class="btnsContainer" > 
					<button onclick="btnR3BThen_onclick(this)">then</button>
				</td>
				<td class="pbsContainer" id="tdR3BC2"> 					
					<div id="tdR3AC2" class="scroll" style="">
						<table class="demo"cellspacing="0"></table>
					</div>				
				</td>
				<td class="msgContainer"> 

				</td>							
				
			</tr>
		</table>

	</section>

	<!--Note  -->	
	<section style="border: solid 0px #ccc;background-color:transparent;box-shadow: none;">
		<!-- <legend>Note</legend>-->
			<p class="text">
				Now it's Time to make 'Promise' shine.
			</p>	 
			<br>

			<p class="note">
				In the following sections, there will be a '<b>Master Promise</b>' and many '<b>Promises</b>'. 

			</p>
			<p class="note"> 
				The 'Master Promise' will succeed or fail based on its promises (and configuration).
			</p>
	</section>	
		
		
		
	<!--Section 4A  -->
	<section style="min-height:70px;">
		<legend>
			<span class="underline">
				<span class="SectionLabel">Section 4A:</span>&nbsp;
				<span class="SectionTitle">'Promise.all'</span>
				<!-- <span class="SectionSubTitle"></span> -->
			</span>
		</legend>

		<table border="0" >	
				
			<tr>
				<td class="msgContainer" id="msgContainer1" colspan="3"> 
					<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all" target="_blank" style="margin-bottom:10px;">Promise.all() - JavaScript | MDN</a>
				</td>
			</tr>
		
			<tr>
				<td class="btnsContainer scroll"> 
					<button onclick="btnR4AAll_onclick(this)">all</button>
				</td>
				<td class="pbsContainer" > <!-- style="border: solid 10px red;" -->
					<div  id="tdR4AC2" class="scroll" style="">
						<table class="demo"cellspacing="0"></table>
					</div>
				</td>
				<td class="msgContainer"> 

				</td>
			</tr>
			
							
			<!-- <tr>
				<td class="msgContainer" id="msgContainer1" colspan="3"> 
					<p class="text">
						With the function '<b>Promise.all</b>', the 'Master-Promise':<br/>
						- <b>resolves</b> (is successful) only when all its 'promises' resolve.<br/>
						- <b>Rejects</b> (fails) as soon any of the 'promises' rejects.
					</p>
				</td>
			</tr> -->
									
			<tr>
				<td class="msgContainer" id="msgContainer1" colspan="3"> 
					<ul>					
						<p class="text" style="text-indent: -25px;">
							With the function '<b>Promise.all</b>', the 'Master-Promise':
						</p>
						<li class="text">
								<b>Resolves</b> (is successful) only when all its 'promises' resolve.
						</li>
						<li class="text">
								<b>Rejects</b> (fails) as soon any of the 'promises' rejects.
						</li>
					</ul>
				</td>
			</tr>
		</table>
	</section>

	
	<!--Note  -->	
	<section style="border: solid 0px #ccc;background-color:transparent;box-shadow: none;">
		<legend>Note</legend>
			<p class="text">
				When a 'ProgressBar' fails, only the associate 'PromiseGUI' shows the right state (become red) all the other 'PromiseGUI' remains in the pending state (dimmed).			
			</p>	

	</section>		
		
	<!--Section 4A Bis  -->
	<section style="min-height:70px;">
		<legend>
			<span class="underline">
				<span class="SectionLabel">Section 4A Bis:</span>&nbsp;
				<span class="SectionTitle">'Promise.all'</span>
				<span class="SectionSubTitle">(extended).</span>
			</span>
		</legend>
		<!-- <legend>
			<span class="SectionLabel">Section 4A Bis: </span> <span class="SectionTitle"> Promise.all<span style="font-weight:normal;"> (extended).</span></span>
		</legend> -->
		<table border="0" style="width:100%;">
		
				
			<tr>
				<td class="msgContainer" id="msgContainer1" colspan="3"> 
					<p class="text">
						In this case, the implementation of 'Promise.all' is a little bit more advanced than the previous, in 'section 4A'.
					</p>
					<p class="text">
						Every 'ProgressBar' is able to set the state (the color) of its own 'PromiseGUI'.<br/>
					</p>
				</td>
			</tr>
		
			<tr>
				<td class="btnsContainer scroll"> 
					<button onclick="btnR4ABisAll_onclick(this)">all</button>
				</td>
				<td class="pbsContainer" colspan="2">
					<div  id="tdR4ABisC2" class="scroll" style="width:100%;border:solid 1px transparent;">
						<table class="demo"cellspacing="0"></table>
					</div>
				</td>

			</tr>
			
							
			<tr>
				<td class="msgContainer" id="msgContainer1" colspan="3"> 
					<p class="text">
						Now, when one of the 'ProgressBar' rejects, it is possible to show the 'state' of the other 'ProgressBar'.<br/>
						<span style="font-size:0.9em;font-style: italic;">(every graphical element is properly colored);</span>
					</p>
				</td>
			</tr>			
			
		</table>
	</section>

		
	<!--Section 4B  -->
	<section style="min-height:70px;">
		<legend>
			<span class="underline">
				<span class="SectionLabel">Section 4B:</span>&nbsp;
				<span class="SectionTitle">'Promise.allSettled'</span>
				<!-- <span class="SectionSubTitle">(extended).</span> -->
			</span>
		</legend>

		<table border="0" >
		
				
			<tr>
				<td class="msgContainer" id="msgContainer1" colspan="3"> 
					<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/allSettled" target="_blank" style="margin-bottom:10px;">Promise.allSettled() - JavaScript | MDN</a>
				</td>
			</tr>
		
			<tr>
				<td class="btnsContainer scroll"> 
					<button onclick="btnR4BAllSettled_onclick(this)">allSettled</button>
				</td>
				<td class="pbsContainer" > <!-- style="border: solid 10px red;" -->
					<div  id="tdR4BC2" class="scroll" style="">
						<table class="demo"cellspacing="0"></table>
					</div>
				</td>
				<td class="msgContainer"> 
					<div style="margin-bottom:10px;">
					</div>
					
				</td>
			</tr>
			
			
							
			<tr>
				<td class="msgContainer" id="msgContainer1" colspan="3"> 
					<p class="text">
						The function 'Promise.allSettled', waits till all the 'ProgressBars' complete (successfully or not). Then resolves.
					</p>
					<p class="text">
						<span style="font-size:0.9em;font-style: italic;">('allSettled' rejects only if a 'catch' occurs.)</span>
					</p>
				</td>
			</tr>	
			
			
		</table>
	</section>
	
		
	<!--Section 4C  -->
	<section style="min-height:70px;">
		<legend>
			<span class="underline">
				<span class="SectionLabel">Section 4C:</span>&nbsp;
				<span class="SectionTitle">'Promise.race'</span>
				<!-- <span class="SectionSubTitle">(extended).</span> -->
			</span>
		</legend>
		<!-- <legend><span class="SectionLabel">Section 4C: </span> <span class="SectionTitle"> Promise.race</span></legend> -->
		<table border="0" >

			<tr>
				<td class="msgContainer" id="msgContainer1" colspan="3"> 
					<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/race" target="_blank" style="margin-bottom:10px;">Promise.race() - JavaScript | MDN</a>
				</td>
			</tr>	
					
		
			<tr>
				<td class="btnsContainer"> 
					<button onclick="btnR4CRace_onclick(this)">race</button>
				</td>
				<td class="pbsContainer" id="tdR4CC2"> 
					<table class="demo"cellspacing="0"></table>
				</td>
				<td class="msgContainer"> 
					<div style="margin-bottom:10px;"></div>
				</td>
			</tr>

			<tr>
				<td class="msgContainer" id="msgContainer1" colspan="3"> 
					<p class="text">
						The function 'race', 'resolve' (is successfull) as soon a 'ProgressBar' 'resolve'. 'reject' as soon any of the 'ProgressBar' 'rejects'.
					</p>
				</td>
			</tr>
			
			
		</table>
	</section>


		
	<!--Section 4D  -->
	<section style="min-height:70px;">
		<legend>
			<span class="underline">
				<span class="SectionLabel">Section 4D:</span>&nbsp;
				<span class="SectionTitle">'Promise.any'</span>
				<!-- <span class="SectionSubTitle">(extended).</span> -->
			</span>
		</legend>
		<!-- <legend>
			<span class="SectionLabel">Section 4D: </span> <span class="SectionTitle"> Promise.any<span style="font-weight:normal;">.</span></span>
		</legend> -->
		<table border="0" >
		
				
			<tr>
				<td class="msgContainer" id="msgContainer1" colspan="3"> 
					<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/any" target="_blank" style="margin-bottom:10px;">Promise.any() - JavaScript | MDN</a>
				</td>
			</tr>
		
			<tr>
				<td class="btnsContainer scroll"> 
					<button onclick="btnR4DAny_onclick(this)">any</button>
				</td>
				<td class="pbsContainer" > <!-- style="border: solid 10px red;" -->
					<div  id="tdR4DC2" class="scroll" style="">
						<table class="demo"cellspacing="0"></table>
					</div>
				</td>
				<td class="msgContainer"> 

				</td>
			</tr>
			
<!-- 		<tr>
				<td class="msgContainer" id="msgContainer1" colspan="3"> 
					<p class="text">
						With '<b>Promise.any</b>', the 'Master-Promise':<br/>
						- <b>resolves</b> (is successful) as soon any of the 'promises' resolve.<br/>
						- <b>Rejects</b> (fails) when all 'promises' rejects.<br/>
					</p>
				</td>
			</tr> -->

			<tr>
				<td class="msgContainer" id="msgContainer1" colspan="3"> 
					<ul>
						<p class="text">With '<b>Promise.any</b>', the 'Master-Promise':</p>
						<li class="text"><b>resolves</b> (is successful) as soon any of the 'promises' resolve.
						</li>
						<li class="text"><b>Rejects</b> (fails) when all 'promises' rejects.
						</li>
					</ul>
				</td>
			</tr>
							
			<tr>
				<td class="msgContainer" id="msgContainer1" colspan="3"> 
					<p class="note">
						<b>Note</b>: Only the succeeding progressBar can set properly its own ProgressGUI. The other progressBars are not able to show its own state.
					</p>					
				</td>
			</tr>
			
		</table>
	</section>	
	
	
	
		
	<!--Section 4D Bis  -->
	<section style="min-height:70px;">
		<legend>
			<span class="underline">
				<span class="SectionLabel">Section 4D Bis:</span>&nbsp;
				<span class="SectionTitle">'Promise.any'</span>
				<span class="SectionSubTitle">(extended).</span>
			</span>
		</legend>
		<!-- <legend>
			<span class="SectionLabel">Section 4D Bis <span><span class="SectionTitle">Promise.any<span style="font-weight:normal;"> (extended).</span></span>
		</legend> -->
		<table border="0" style="width:100%;">
		
				
			<tr>
				<td class="msgContainer" id="msgContainer1" colspan="3"> 
					<p class="text">
					In this case, the implementation of 'Promise.any' is a little bit more advanced than the previous, in 'section 4D'.
					Every 'ProgressBar' is able to set the state (the color) of its own 'PromiseGUI'.<br/>
					</p>
				</td>
			</tr>
		
			<tr>
				<td class="btnsContainer scroll"> 
					<button onclick="btnR4DBisAny_onclick(this)">any</button>
				</td>
				<td class="pbsContainer" colspan="2">
					<div  id="tdR4DBisC2" class="scroll" style="width:100%;border:solid 1px transparent;">
						<table class="demo"cellspacing="0"></table>
					</div>
				</td>

			</tr>
			
							
			<tr>
				<td class="msgContainer" id="msgContainer1" colspan="3"> 
					<p class="note">
						Now, every 'Promise' that fullfils (resolves or rejects) it is able to set its own 'PromiseGUI.<br/>
						<span style="font-size:0.9em;font-style: italic;">(every graphical element is properly colored);</span>
					</p>
				</td>
			</tr>			
			
		</table>
	</section>
	
		
	<!--Section 5A  -->
	<!-- <section style="min-height:230px;">
		<legend>
			<span class="underline">
				<span class="SectionLabel">Section 5A Bis:</span>&nbsp;
				<span class="SectionTitle">'Promise' synchronous</span>
			</span>
		</legend>
		<table border="0" >
		
		
			<tr>
				<td class="msgContainer" id="msgContainer1" colspan="3"> 
					<br/>
				</td>
			</tr>
			<tr>
				<td class="btnsContainer"> 
					<button onclick="btnR5AStart_onclick(this)">start</button>
				</td>
				<td class="pbsContainer" id="tdR5AC2"> 
					<div  id="tdR5AC2" class="scroll" style="">
						<table class="demo"cellspacing="0"></table>
					</div>
				</td>
				<td class="msgContainer"> 
				</td>
			</tr>
			
			
			<tr>
				<td class="msgContainer" id="msgContainer1" colspan="3"> 
					<p class="text">
						Using '<span class="blue">async/await</span>' a 'Promise' transforms an <span class="red" style="font-weight:bold;">A</span>synchronous process in a <span style="co lor:red;font-weight:bold;">S</span>ynchronous.					<br/>
							<span style="font-size:0.9em;font-style: italic;">(This configuration does not need a 'Master-Promise' that controls the other 'Promises')</span>
					</p>
				</td>
			</tr>
		</table>
	</section> -->
	
		
	<!--Note  -->
	<section style="border: solid 0px #ccc;background-color:transparent;box-shadow: none;">
		<legend>Note</legend>
			<p class="text">
				Now some, more in-depth, consideration regarding:<br/>
				1) <b>concurrency</b><br/>
				2) <b>threading</b><br/>
			</p>
			<p class="text">
				Starting from section 4A, a single 'Master-Promise' controls many, independent and simultaneous processes. This is always safe under javascript.
				because the JS engine works on a single thread, so there is 
				only one process running in a given time. 
			</p>
			<p class="text">
				Hence, when a 'executer' function gets its 'CPU Time slot', it has the time to set its state 
				and then notifying 'Promise' without worrying if another process might leave it in an inappropriate state.
			</p>	

	</section>		


	<section style="min-height:170px;">
		<legend>
			<span class="underline">
				<span class="SectionLabel">Section 6A:</span>&nbsp;
				<span class="SectionTitle">Single threads</span>
				<span class="SectionSubTitle">(a demonstration.).</span>
			</span>
		</legend>
		<!-- <legend>
			<span class="SectionLabel">Section 6A:</span><span class="SectionTitle">Single thread<span style="font-weight:normal;"> a demonstration.</span></span>		
		
		</legend> -->
				
			<table border="0" >
		
			<tr>
				<td class="msgContainer" id="msgContainer1" colspan="3">
					<p class="text"> 
						This section tries to demonstrate what it means to be a single thread. In this demonstration:<br/>
						- the horizontal line is time.<br/>
						- the time between 2 vertical segments is always 50 milliseconds.<br/>
						- there are two processes: the <span class="red">red</span> and the <span style="color:green;">green</span><br/>
						- each process takes a random amount of time to complete<br/>
						- an iteration is when both processes begin<br/>
						- the scheduled interval between two iterations can be one of {100, 150, 200, 250, 300} [ms]<br/>
						- the <span class="red">red</span> process begins always before the <span style="color:green;">green</span> process and can last even more than (interval/2) [ms]<br/>
						- the <span style="color:green;">green</span> process is always scheduled (interval/2) [ms] after the <span class="red">red</span> process
					</p>
				</td>
			</tr>
			<tr>
				<td colspan="3">
					<canvas id="canvas"  style="border:1px solid #999;width:100%; height:50px;background-color:#FFFFFF"><br/>
				</td>
			</tr>
			<tr>
				<td colspan="3">
					<p class="note">
						<strong>Note:</strong> The canvas tag is not supported in Internet Explorer 8 and earlier versions.
					</p>
					<br/>
			</tr>
			
			<tr>
				<td class="msgContainer" id="msgContainer1" colspan="3"> 
					<p class="text">
						The example shows that, regardless of any time schedule, operated by 'setInterval', every job (the function 'process') is executed only after the previous is completed <span style="font-size:0.9em;font-style: italic;">(Only when the interval of 'setInterval' is long enough, the schedule will be respected.)</span>
					</p>
					<p class="text">
						In other words, since the javascript 'engine' works on a single thread it does not allow <b>Concurrency</b>.
					</p>
					<p class="text">
					The key poit here is:<br/>
					<b>Two -or more- processes cannot run at the same time </b>. 	<span style="font-size:0.9em;font-style: italic;">(The <span class="red">red</span> process and the <span style="color:green;">green</span> process will never overlap)</span>
					</p>
				</td>
			</tr>
		
		
			<tr>
				<td class="btnsContainer" style="vertical-align: top;margin-top:15px;"> 
					<button onclick="btnR6ALoops100_onClick(this)">Loops 100 [ms]</button>
					<button onclick="btnR6ALoops150_onClick(this)">Loops 150 [ms]</button>
					<button onclick="btnR6ALoops200_onClick(this)">Loops 200 [ms]</button>
					<button onclick="btnR6ALoops250_onClick(this)">Loops 250 [ms]</button>
					<button onclick="btnR6ALoops300_onClick(this)">Loops 300 [ms]</button>
				</td>
				<td class="pbsContainer" id="tdR6AC2" collspan="2"> 
					<div style="height:300px;overflow-x:hidden;overflow-y: auto;width:450px;">
						<ul id="ulR6A" style="">
						</ul>
					</div>		
				</td>
			</tr>
						
		</table>
	</section>
	
	
	<section style="min-height:170px;">
		<legend>
			<span class="underline">
				<span class="SectionLabel">Section 6B:</span>&nbsp;
				<span class="SectionTitle">ProgressBar</span>
				<span class="SectionSubTitle">(Synchronous/Asynchronous).</span>
			</span>
		</legend>
		<!-- <legend>
			<span class="SectionLabel">Section 6B: </span><span class="SectionTitle">ProgressBar<span style="font-weight:normal;"> Synchronous/Asynchronous.</span></span>				
		</legend> -->
		<table border="0" >
		
			<tr>
				<td class="msgContainer" id="msgContainer1" colspan="3"> 
				
				<p class="text">
					'ProgessBar' can  also run as a <b>synchronous </b> process. This session shows the different behavior, due to the fact that the javascript engine, runs on a single thread.
				</p>	
				</td>
			</tr>
		
		
			<tr>
				<td class="btnsContainer"> 
					<button onclick="btnR6BStartA_onclick(this)">start (Async)</button>
					<button onclick="btnR6BStartS_onclick(this)">start (Sync)</button>
				</td>
				<td class="pbsContainer" collspan="2"> 
					<div  id="tdR6BC2" class="scroll" style="width:100%;border:solid 1px transparent;">
						<table class="demo"cellspacing="0"></table>
					</div>				
				</td>
			</tr>
			
		
			<tr>
				<td class="msgContainer" id="msgContainer1" colspan="3"> 
					<p class="text">
						When 'ProgessBar' is synchronous, each item completes its job <b>always in the same order</b>, always after the previous 'ProgressBar' completes and the page freezes.
					</p>
				</td>
			</tr>			
		</table>
	</section>
	
		
	<!--Note  -->
	<section style="border: solid 0px #ccc;background-color:transparent;box-shadow: none;">
		<p class="text">
				How this affects 'Promise'?
			</p>
	</section>		
	

	<section style="min-height:170px;">
		<legend>
			<span class="underline">
				<span class="SectionLabel">Section 7A:</span>&nbsp;
				<span class="SectionTitle">Promise.then</span>
				<span class="SectionSubTitle">(Synchronous/Asynchronous).</span>
			</span>
		</legend>
		<!-- <legend>
			<span class="SectionLabel">Section 7A: </span> <span class="SectionTitle">Promise.then<span style="font-weight:normal;"> Synchronous/Asynchronous.</span></span>		
		
		</legend> -->
		<table border="0" >
		
		
			<tr>
				<td class="msgContainer" id="msgContainer1" colspan="3"> 
					<p class="text">
						A single "Promise" is completely indifferent whether the process it controls is synchronous or ASynchronous.
					</p>
				</td>
			</tr>
		
		
			<tr>
				<td class="btnsContainer"> 
					<button onclick="btnR7AThenA_onclick(this)">then (Async)</button>
					<button onclick="btnR7AThenS_onclick(this)">then (Sync)</button>
				</td>
				<td class="pbsContainer" collspan="2"> 
					<div  id="tdR7AC2" class="scroll" style="width:100%;border:solid 1px transparent;">
						<table class="demo"cellspacing="0"></table>
					</div>				
				</td>
			</tr>
			
			
		</table>
	</section>	
	

	<section >
		<legend>Note</legend>
			<p class="note">				
				Configuring a 'Master-Promise' is a 3 steps process.
			</p>
<pre>

	<span class="green">// 1) creating the array of <b>promises</b> where each element</span>
	<span class="green">// is a 'Promise', controlling its own process:</span>
	<span class="blue">var </span>promises = [ 
		<span class="blue">new </span>Promise(<span class="red">executor1</span>),
		<span class="blue">new </span>Promise(<span class="red">executor2</span>), 
		... ,
		<span class="blue">new </span>Promise(<span class="red">executorN</span>)
	];

	<span class="green">// 2) creating the <b>masterPromise</b>:</span>
	<span class="blue">var </span> masterPromise = Promise.all(promises);

	<span class="green">// 3) Let the masterPromise doing its job.</span>			
	masterPromise
	&nbsp;&nbsp;.then( ... )
	&nbsp;&nbsp;.finally( ... )
	&nbsp;&nbsp;.catch( ... );

</pre>
	<p class="note">
		They must be consecutive, but not necessarily in the same function!
	</p>		
	<p class="note">
		<b>The constraint is</b>, masterPromise must be created, at least, immediately before the first resolve/reject is called.
	</p>	
			
	</section>		

		
	<!--Section 7B  -->
	<section style="min-height:70px;">
		<legend>
			<span class="SectionLabel">Section 7B: </span> <span class="SectionTitle">Promise.all <span style="font-weight:normal;">three steps.</span></span>
		</legend>
		<table border="0" >		
			<tr>
				<td class="msgContainer" id="msgContainer1" colspan="3"> 
					<p class="text">
						Another 'Promise.all', this time configurated following the previous note.
					</p>
				</td>
			</tr>
			<tr>
				<td class="btnsContainer"> 
					<button id="btnR7BNewPromise" onclick="btnR7BNewPromise_onclick(this)">new Master Promise</button>
					<br/>
					<br/>
					<!--button id="btnR7BAll" onclick="btnR7BAll_onclick(this)">all</button-->
					<br/>
					<br/>
					<button id="btnR7BThen" onclick="btnR7BThen_onclick(this)">then</button>				
				</td>
				<td class="pbsContainer" id="tdR7BC2" colspan="2"> 
					<table class="demo"cellspacing="0"></table>
				</td>

			</tr>

		</table>
	</section>	
	
	
	<!--Section 7C  -->
	<section style="min-height:70px;">
		<legend>
			<span class="SectionLabel">Section 7C:</span> <span class="SectionTitle">Promise.race <span style="font-weight:normal;">three steps.</span></span>
		</legend>
		<table border="0" >		
			<tr>
				<td class="msgContainer" id="msgContainer1" colspan="3"> 
					<p class="text">				
						Another 'Promise.race', this time configurated following the previous note.
					</p>	
				</td>
			</tr>
			<tr>
				<td class="btnsContainer"> 
					<button id="btnR7CNewPromise" onclick="btnR7CNewPromise_onclick(this)">new Master Promise</button>
					<br/>
					<br/>
					<!--button id="btnR7CRace"  onclick="btnR7CRace_onclick(this)">race</button-->
					<br/>
					<br/>
					<button id="btnR7CThen" onclick="btnR7CThen_onclick(this)">then</button>				
				</td>
				<td class="pbsContainer" id="tdR7CC2" colspan="2"> 
					<table class="demo"cellspacing="0"></table>
				</td>

			</tr>

		</table>
	</section>

	<section >
		<legend>
			<span class="SectionLabel">Section 7D: </span> <span class="SectionTitle">setTimeout</span>			
		</legend>
		
		<table border="0" >		
			<tr>
				<td class="msgContainer" id="msgContainer1" colspan="3"> 	
					<p class="text">
					In both the previous sections:<br/> 
					- The 'Master-Promise' is instantiated immediately before the first 'resolve' is called.<br/> 
					- The 'then' button is enabled immediately after the 'Master-Promise' is created.<br/> 
					</p>
					<p class="text">
						This configuration is somewhat unusual, but it works!
					</p>
					<p class="text">
						What lesson did we learn from Session 7?<br/> 
						<br/> 
						- 7A demonstrates that synchronous processes halt the flow of code until they are completed.<br>
						- 7B and 7C illustrate that the 'Master-Promise' cannot be created after the synchronous processes it controls have completed.
					</p>
					<p class="text">		
						Therefore, <b>the processes controlled by the 'Promise' MUST be ASynchronous to be managed correctly!</b>
					</p>
					<p class="text">
						To elaborate further, the 'Master-Promise' needs to be created before any of the resolves or rejects are called. 
						However, to create a 'Master-Promise', for example, using Promise.race(promises), we need to create the array 
						of promises (the parameter of the Promise.race function).
					</p>
					<p class="text">
						To ensure that the processes controlled by each promise in the array wait until the 'Master-Promise' is 
						correctly configured, we can 'push' the process out of the currently executing function by using 
						setTimeout(start, 0);.
					</p>
				</td>
			</tr>

		</table>

	</section>	

	<aside style="background-color: #F0F0F5;">
		<legend>
			<span class="SectionLabel">Extra: </span> 
			<span class="SectionTitle">Console.js</span>
			<span style="font-weight:normal;">Adds styles to messages</span>
		</legend>
		<p class="text">
			'<b>Console.js</b>': a library that provides a simple way to log messages to the console.
		</p>
		<p class="text">
			<i>While in debug mode with tab 'Source' active and the tab 'Page' 
				(in the navigator: the picture below) the file Console.js</i>
		</p>
		<img src="./stuffs/Stuff.png" style="width: 226PX;margin:auto;display: block;border:solid 1px #ccc;">

		<br>
		
		<p class="text">
			Implements a 'custom' loging function, as shown in the picture below.
		</p>

		<img src="./stuffs/Console.png" style="width: 80%;margin:auto;display: block;border:solid 1px #ccc;margin-top:10px;">

		<br>
	</aside>
	
	<aside style="background-color: #F0F0F5;">
		<legend>
			<span class="SectionLabel">Extra: </span> 
			<span class="SectionTitle">The Workbench</span>
			<span style="font-weight:normal;">Rubik's cube tutorial + solver</span>
		</legend>

		<p class="text">
			A truly new easier approach to the rubikscube. <i>(Solves the cube with just one algorithm: the 'Sledgehammer'.)</i>
		</p>
		<br>		
		<img src="./stuffs/workbench.140x140.png" style="margin:auto;display: block;border:solid 1px transparent;margin-top:10px;">
		<br>
		<p class="text">
			<a target="_blank" href="https://www.easycubing.net/">easycubing.net</a> TUTORIAL: - <b>The Workbench</b>: a new approach to the Rubik's cube 
		</p>
		
		<p class="text">
			<a target="_blank" href="https://www.cubeiteasy.com/">cubeiteasy.com</a> SOLVER - to solve any scramble step by step 
		</p>
		<br>	

	</aside>
	
	<section style="border: solid 0px #ccc;background-color:transparent;box-shadow: none;padding-top:0px;">
		<p class="text">
			That's all.
		</p>
		<p class="text">
			Hoping you enjoyed this page.
		</p>
		<p class="text">
			Bye :-)				
		</p>	

		<br>	
		<br>	
	</section>	
	


	<!-- <div style="margin-bottom:20px;border: solid 2px red;">	
	</div> -->


</body>


</html>

<script src="./stuffs/tools.js"></script>
<script src="./stuffs/console.js"></script>


<!-- ===================================== -->
<script src="./js/S0A.js"></script>
<script src="./js/S1A.js"></script>
<script src="./js/S1B.js"></script>
<script src="./js/S0C.js"></script>
<script src="./js/R0A.js"></script>
<script src="./js/R1A.js"></script>
<script src="./js/R1B.js"></script>
<script src="./js/R1C.js"></script>
<script src="./js/R2A.js"></script>
<script src="./js/R2B.js"></script>
<script src="./js/R2C.js"></script>
<script src="./js/R2D.js"></script>
<script src="./js/R3A.js"></script>
<script src="./js/R3B.js"></script>
<script src="./js/R4A.js"></script>
<script src="./js/R4ABis.js"></script>
<script src="./js/R4B.js"></script>
<script src="./js/R4C.js"></script>
<script src="./js/R4D.js"></script>
<script src="./js/R4DBis.js"></script>
<script src="./js/R5A.js"></script>
<script src="./js/R6A.js"></script>
<script src="./js/R6B.js"></script>
<script src="./js/R7A.js"></script>
<script src="./js/R7B.js"></script>
<script src="./js/R7C.js"></script>
<script src="./js/R7D.js"></script>
<!-- ===================================== -->


